<!DOCTYPE html><html lang="en-US" data-theme="light"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0,viewport-fit=cover"><title>Yuchen You - Soused eyes incognizant of heaven merging with the water below; A boatload of airy dreams weighs on the Silver Flow</title><meta name="author" content="Yuchen You (Wesley)"><meta name="copyright" content="Yuchen You (Wesley)"><meta name="format-detection" content="telephone=no"><meta name="theme-color" content="#ffffff"><meta property="og:type" content="website">
<meta property="og:title" content="Yuchen You">
<meta property="og:url" content="http://example.com/index.html">
<meta property="og:site_name" content="Yuchen You">
<meta property="og:locale" content="en_US">
<meta property="og:image" content="http://example.com/img/me_new.jpeg">
<meta property="article:author" content="Yuchen You (Wesley)">
<meta property="article:tag" content="Coder, UMich, SJTU, CS">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="http://example.com/img/me_new.jpeg"><link rel="shortcut icon" href="/img/hackerrank.svg"><link rel="canonical" href="http://example.com/index.html"><link rel="preconnect" href="//cdn.jsdelivr.net"/><link rel="preconnect" href="//busuanzi.ibruce.info"/><link rel="stylesheet" href="/css/index.css?v=4.13.0"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@6.5.1/css/all.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fancyapps/ui@5.0.33/dist/fancybox/fancybox.min.css" media="print" onload="this.media='all'"><script>const GLOBAL_CONFIG = {
  root: '/',
  algolia: undefined,
  localSearch: {"path":"/search.xml","preload":false,"top_n_per_article":1,"unescape":false,"languages":{"hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found"}},
  translate: undefined,
  noticeOutdate: undefined,
  highlight: {"plugin":"highlight.js","highlightCopy":true,"highlightLang":true,"highlightHeightLimit":false},
  copy: {
    success: 'Copy Successful',
    error: 'Copy Error',
    noSupport: 'Browser Not Supported'
  },
  relativeDate: {
    homepage: true,
    post: true
  },
  runtime: '',
  dateSuffix: {
    just: 'Just now',
    min: 'minutes ago',
    hour: 'hours ago',
    day: 'days ago',
    month: 'months ago'
  },
  copyright: undefined,
  lightbox: 'fancybox',
  Snackbar: undefined,
  infinitegrid: {
    js: 'https://cdn.jsdelivr.net/npm/@egjs/infinitegrid@4.11.1/dist/infinitegrid.min.js',
    buttonText: 'Load More'
  },
  isPhotoFigcaption: false,
  islazyload: false,
  isAnchor: false,
  percent: {
    toc: true,
    rightside: false,
  },
  autoDarkmode: false
}</script><script id="config-diff">var GLOBAL_CONFIG_SITE = {
  title: 'Yuchen You',
  isPost: false,
  isHome: true,
  isHighlightShrink: false,
  isToc: false,
  postUpdate: '2025-11-29 10:34:23'
}</script><script>(win=>{
      win.saveToLocal = {
        set: (key, value, ttl) => {
          if (ttl === 0) return
          const now = Date.now()
          const expiry = now + ttl * 86400000
          const item = {
            value,
            expiry
          }
          localStorage.setItem(key, JSON.stringify(item))
        },
      
        get: key => {
          const itemStr = localStorage.getItem(key)
      
          if (!itemStr) {
            return undefined
          }
          const item = JSON.parse(itemStr)
          const now = Date.now()
      
          if (now > item.expiry) {
            localStorage.removeItem(key)
            return undefined
          }
          return item.value
        }
      }
    
      win.getScript = (url, attr = {}) => new Promise((resolve, reject) => {
        const script = document.createElement('script')
        script.src = url
        script.async = true
        script.onerror = reject
        script.onload = script.onreadystatechange = function() {
          const loadState = this.readyState
          if (loadState && loadState !== 'loaded' && loadState !== 'complete') return
          script.onload = script.onreadystatechange = null
          resolve()
        }

        Object.keys(attr).forEach(key => {
          script.setAttribute(key, attr[key])
        })

        document.head.appendChild(script)
      })
    
      win.getCSS = (url, id = false) => new Promise((resolve, reject) => {
        const link = document.createElement('link')
        link.rel = 'stylesheet'
        link.href = url
        if (id) link.id = id
        link.onerror = reject
        link.onload = link.onreadystatechange = function() {
          const loadState = this.readyState
          if (loadState && loadState !== 'loaded' && loadState !== 'complete') return
          link.onload = link.onreadystatechange = null
          resolve()
        }
        document.head.appendChild(link)
      })
    
      win.activateDarkMode = () => {
        document.documentElement.setAttribute('data-theme', 'dark')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#0d0d0d')
        }
      }
      win.activateLightMode = () => {
        document.documentElement.setAttribute('data-theme', 'light')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#ffffff')
        }
      }
      const t = saveToLocal.get('theme')
    
        if (t === 'dark') activateDarkMode()
        else if (t === 'light') activateLightMode()
      
      const asideStatus = saveToLocal.get('aside-status')
      if (asideStatus !== undefined) {
        if (asideStatus === 'hide') {
          document.documentElement.classList.add('hide-aside')
        } else {
          document.documentElement.classList.remove('hide-aside')
        }
      }
    
      const detectApple = () => {
        if(/iPad|iPhone|iPod|Macintosh/.test(navigator.userAgent)){
          document.documentElement.classList.add('apple')
        }
      }
      detectApple()
    })(window)</script><meta name="generator" content="Hexo 7.2.0"><link href="https://cdn.bootcss.com/KaTeX/0.11.1/katex.min.css" rel="stylesheet" /></head><body><div id="web_bg"></div><div id="sidebar"><div id="menu-mask"></div><div id="sidebar-menus"><div class="avatar-img is-center"><img src="/img/me_new.jpeg" onerror="onerror=null;src='/img/friend_404.gif'" alt="avatar"/></div><div class="sidebar-site-data site-data is-center"><a href="/archives/"><div class="headline">Articles</div><div class="length-num">300</div></a><a href="/tags/"><div class="headline">Tags</div><div class="length-num">46</div></a><a href="/categories/"><div class="headline">Categories</div><div class="length-num">8</div></a></div><hr class="custom-hr"/><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> Home</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fas fa-archive"></i><span> Archives</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fas fa-tags"></i><span> Tags</span></a></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw fas fa-folder-open"></i><span> Categories</span></a></div><div class="menus_item"><a class="site-page" href="/about/"><i class="fa-fw fas fa-heart"></i><span> About</span></a></div></div></div></div><div class="page" id="body-wrap"><header class="full_page" id="page-header" style="background-image: url('/img/math_master.jpeg')"><nav id="nav"><span id="blog-info"><a href="/" title="Yuchen You"><img class="site-icon" src="/img/avatar.png"/><span class="site-name">Yuchen You</span></a></span><div id="menus"><div id="search-button"><a class="site-page social-icon search" href="javascript:void(0);"><i class="fas fa-search fa-fw"></i><span> Search</span></a></div><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> Home</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fas fa-archive"></i><span> Archives</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fas fa-tags"></i><span> Tags</span></a></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw fas fa-folder-open"></i><span> Categories</span></a></div><div class="menus_item"><a class="site-page" href="/about/"><i class="fa-fw fas fa-heart"></i><span> About</span></a></div></div><div id="toggle-menu"><a class="site-page" href="javascript:void(0);"><i class="fas fa-bars fa-fw"></i></a></div></div></nav><div id="site-info"><h1 id="site-title">Yuchen You</h1><div id="site-subtitle"><span id="subtitle"></span></div><div id="site_social_icons"><a class="social-icon" href="https://github.com/1Wesleyyou" target="_blank" title="Github"><i class="fab fa-github" style="color: #24292e;"></i></a><a class="social-icon" href="mailto:yuchenxr@umich.edu" target="_blank" title="Email"><i class="fas fa-envelope" style="color: #4a7dbe;"></i></a><a class="social-icon" href="https://www.linkedin.com/in/yuchen-you-a74940314/?locale=en_US" target="_blank" title="LinkedIn"><i class="fab fa-linkedin" style="color: #4a4dbe;"></i></a><a class="social-icon" href="/Yuchen_CV.pdf" target="_blank" title="CV"><i class="fas fa-address-card" style="color: #251456;"></i></a></div></div><div id="scroll-down"><i class="fas fa-angle-down scroll-down-effects"></i></div></header><main class="layout" id="content-inner"><div class="recent-posts" id="recent-posts"><div class="recent-post-item"><div class="recent-post-info no-cover"><a class="article-title" href="/2025/11/28/wesley_knowledge_repo/ds/7.spanner/" title="7. 分布式事务系统与 Spanner">7. 分布式事务系统与 Spanner</a><div class="article-meta-wrap"><span class="post-meta-date"><i class="fas fa-history"></i><span class="article-meta-label">Updated</span><time datetime="2025-11-29T02:34:17.748Z" title="Updated 2025-11-29 10:34:17">2025-11-29</time></span><span class="article-meta tags"><span class="article-meta-separator">|</span><i class="fas fa-tag"></i><a class="article-meta__tags" href="/tags/distributed-sys/">distributed_sys</a></span></div><div class="content">分布式事务系统 Distributed Transaction
根据分布式数据库系统的类似要求, 我们设计的分布式系统要支持 ACID 准则:

Atomicity (原子性): 事务要么全部完成, 要么全部不做;
Consistency (一致性): 事务执行前后, 数据库必须处于一致状态;
Isolation (隔离性): 并发执行的事务彼此隔离, 互不干扰;
Durability (持久性): 一旦事务提交, 其结果是永久性的, 即使系统崩溃也不会丢失;

如何区分 Linearizability 和 Serializability?

Linearizability (线性一致性):

每个操作看起来像是瞬间发生的, 并且所有的 read 都会反映已经发生的所有 write 的结果


Serializability (可串行化):

并发执行的事务的结果与某个串行执行的顺序相同
Strict Serializability:

结合了线性一致性和可串行化的概念
也就是外界看到的顺序和实际执行的顺序是一致的





Isolation 问题与二相锁 (2PL)
一个常见的 i ...</div></div></div><div class="recent-post-item"><div class="recent-post-info no-cover"><a class="article-title" href="/2025/11/28/wesley_knowledge_repo/ds/6.dynamo/" title="6. Amazon Dynamo 系统">6. Amazon Dynamo 系统</a><div class="article-meta-wrap"><span class="post-meta-date"><i class="fas fa-history"></i><span class="article-meta-label">Updated</span><time datetime="2025-11-29T01:55:29.644Z" title="Updated 2025-11-29 09:55:29">2025-11-29</time></span><span class="article-meta tags"><span class="article-meta-separator">|</span><i class="fas fa-tag"></i><a class="article-meta__tags" href="/tags/distributed-sys/">distributed_sys</a></span></div><div class="content"></div></div></div><div class="recent-post-item"><div class="recent-post-info no-cover"><a class="article-title" href="/2025/11/28/wesley_knowledge_repo/db/5.transaction/" title="5. Transaction and ACID DB">5. Transaction and ACID DB</a><div class="article-meta-wrap"><span class="post-meta-date"><i class="fas fa-history"></i><span class="article-meta-label">Updated</span><time datetime="2025-11-28T22:48:47.890Z" title="Updated 2025-11-29 06:48:47">2025-11-29</time></span><span class="article-meta tags"><span class="article-meta-separator">|</span><i class="fas fa-tag"></i><a class="article-meta__tags" href="/tags/distributed-sys/">distributed_sys</a><span class="article-meta-link">•</span><i class="fas fa-tag"></i><a class="article-meta__tags" href="/tags/database/">database</a></span></div><div class="content">ACID 准则
在讨论支持并发的文件系统 (包括 482 p4 NFS, DBMS 等) 的时候, 我们往往会提到一个非常核心的准则: ACID 准则.

Atomicity (原子性): 事务是一个不可分割的工作单位, 要么全部完成, 要么全部不做;
Consistency (一致性): 事务的执行必须使数据库从一个一致性状态转变到另一个一致性状态;
Isolation (隔离性): 并发执行的事务彼此之间是隔离的, 一个事务的中间状态对其他事务不可见;

两个事务并发的时候不能互相冲突


Durability (持久性): 一旦事务提交, 它对数据库的修改就是永久性的, 即使系统崩溃也不会丢失.

更多是从 recovery 恢复角度来讲的, 也就是尽量能在任何崩溃情况下都不丢数据;具体看 [Logging](#Log 日志结构) 章节和 Recovery 章节



并发控制的数据库系统
并发控制与隔离性的基础

事务 (Transaction):  事务是 DBMS 中变化的基本单位;它是在数据库上执行的一系列操作(如 SQL 查询), 以完成某种高级功能;

事务的抽象视图 ...</div></div></div><div class="recent-post-item"><div class="recent-post-info no-cover"><a class="article-title" href="/2025/11/06/wesley_knowledge_repo/db/4.storage/" title="4. Database Storage Structure">4. Database Storage Structure</a><div class="article-meta-wrap"><span class="post-meta-date"><i class="fas fa-history"></i><span class="article-meta-label">Updated</span><time datetime="2025-11-14T04:04:52.260Z" title="Updated 2025-11-14 12:04:52">2025-11-14</time></span><span class="article-meta tags"><span class="article-meta-separator">|</span><i class="fas fa-tag"></i><a class="article-meta__tags" href="/tags/database/">database</a></span></div><div class="content">Database Storage
Disk-Based Architecture(磁盘架构)
DBMS 假定数据库的主存储位置在非易失性磁盘 (Disk / SSD);
系统组件负责在 volatile memory(主存) 与 non-volatile storage(磁盘) 之间移动数据;
Storage Hierarchy(存储层次)
CPU Registers &lt; CPU Cache &lt; DRAM &lt; SSD &lt; HDD &lt; Network Storage
越靠上速度越快, 容量越小, 成本越高;
DBMS 设计目标: 最大化利用高速层, 最小化慢速访问;
为什么不直接用 OS 管理存储
虽然可以用 mmap() 将文件映射到内存, 但:

DBMS 无法控制 page replacement 策略;
OS 不保证 flush 顺序;
并发写入下可能引发不可控的 page fault;
因此 DBMS 自己实现 Buffer Pool, Page Replacement 与 Flush 策略更可控;

常见 OS 辅助机制:

madvise: 告 ...</div></div></div><div class="recent-post-item"><div class="recent-post-info no-cover"><a class="article-title" href="/2025/10/16/wesley_knowledge_repo/ds/5.paxos/" title="5. Consensus: Paxos Made Simple (not to me)">5. Consensus: Paxos Made Simple (not to me)</a><div class="article-meta-wrap"><span class="post-meta-date"><i class="fas fa-history"></i><span class="article-meta-label">Updated</span><time datetime="2025-10-20T03:37:29.833Z" title="Updated 2025-10-20 11:37:29">2025-10-20</time></span><span class="article-meta tags"><span class="article-meta-separator">|</span><i class="fas fa-tag"></i><a class="article-meta__tags" href="/tags/discrete-math/">discrete_math</a><span class="article-meta-link">•</span><i class="fas fa-tag"></i><a class="article-meta__tags" href="/tags/distributed-sys/">distributed_sys</a><span class="article-meta-link">•</span><i class="fas fa-tag"></i><a class="article-meta__tags" href="/tags/Consensus/">Consensus</a></span></div><div class="content">Introduction
上回书我们说到, PB 复制存储的设计对比 Replicated State Machine (RSM) 有 Fault Tolerant 方向的极大优点, 也就是 RSM 在某个节点卡住的时候会导致整个系统卡顿, 因为 RSM 利用了 Lamport Clock 逻辑顺序的 握手机制来达到实际上的全局一致顺序, 如果局部卡死我们这里的握手就无法达成, 逻辑链就断掉了
但是 PB 肯定也有其缺点 不然为什么还要特意讲讲 RSM, 在我们实现了 PB 设计的原理基础上, 让我们来看看 PB 设计的缺点:

PB 同步链路失效: 这样其实就卡死了, 因为 priamry 一定要同步给 backup 但是由于 link 挂了, 整个同步就无法成立
Primary Push 过程失效: 如果 primary 在 push 的时候挂了, 那么 backup 永远收不到更新, 也就永远无法同步

因此我们折中派就要考虑如何优化 RSM 来修复 PB 的这两个问题了, 而且 RSM 在带宽上肯定是更有优势的 (每个 RSM node 都可以接收外来请求)
设计目标 (从整个 ...</div></div></div><div class="recent-post-item"><div class="recent-post-info no-cover"><a class="article-title" href="/2025/10/12/wesley_knowledge_repo/ds/4.lexical_pb_vs/" title="4. Primary-Backup Storage System Design and Implementation (PBSSDI)">4. Primary-Backup Storage System Design and Implementation (PBSSDI)</a><div class="article-meta-wrap"><span class="post-meta-date"><i class="fas fa-history"></i><span class="article-meta-label">Updated</span><time datetime="2025-10-17T20:18:44.038Z" title="Updated 2025-10-18 04:18:44">2025-10-18</time></span><span class="article-meta tags"><span class="article-meta-separator">|</span><i class="fas fa-tag"></i><a class="article-meta__tags" href="/tags/distributed-sys/">distributed_sys</a></span></div><div class="content">本文是针对 UMich EECS491 (这课抄了致敬 MIT CS 6.824) 的 project2 的设计思路和实现的总结, 也可以作为一般的 primary-backup 1-fault-tolerant distributed storage system 的设计参考.
本文不会涉及具体的实现细节, 只会涉及一些 high-level 的设计思路 如果有 JI/GC 同学当了 IA/GSI 希望不要举报我
Lexical Confinement: 串行逻辑链
在分布式系统的高并发请求中并不会完全像我们在单机操作系统中看到的 performance
是最重要的, 在分布式系统中 consistency 才是最重要的, 为了避免各种不同步的分布式
failure 导致的不一致问题以及编码实现的复杂性, 我们可以通过串行化的方式来简化
回忆 Go 语言设计中非常重要的 CSP 模型:

Sharing Memory by Communicating, not Communicating by Sharing Memory

也就是要利用 channel 机制来实现不同线程之间的数据 ...</div></div></div><div class="recent-post-item"><div class="recent-post-info no-cover"><a class="article-title" href="/2025/10/06/wesley_knowledge_repo/os/historical/21.lfs/" title="21. The Design and Implementation of a Log-Structured File System">21. The Design and Implementation of a Log-Structured File System</a><div class="article-meta-wrap"><span class="post-meta-date"><i class="fas fa-history"></i><span class="article-meta-label">Updated</span><time datetime="2025-10-06T21:48:33.320Z" title="Updated 2025-10-07 05:48:33">2025-10-07</time></span><span class="article-meta tags"><span class="article-meta-separator">|</span><i class="fas fa-tag"></i><a class="article-meta__tags" href="/tags/operating-system/">operating_system</a><span class="article-meta-link">•</span><i class="fas fa-tag"></i><a class="article-meta__tags" href="/tags/unix/">unix</a></span></div><div class="content">Design for File Systems of the 1990’s
文件系统的设计受到两种力量驱动:

技术 (Technology): 提供基本的硬件能力与性能边界;
工作负载 (Workload): 决定系统需要高效完成的操作类型;

本节总结了 1990 年代的技术变迁及其对文件系统设计的影响, 并说明为何当时的传统文件系统难以适应这些变化, 从而引出了 Sprite LFS(Log-Structured File System) 的设计动机;
2.1 技术背景 (Technology)
1. 处理器 (Processors)

CPU 性能以近乎指数级速度提升, 并将持续很长一段时间;
这种提升迫使系统中其他组件(如磁盘, 内存)也必须加快, 否则系统整体性能会&quot;失衡&quot;;

2. 磁盘 (Disks)

磁盘技术的主要改进集中在 成本与容量, 而非性能;
磁盘性能包含两个部分:

传输带宽 (transfer bandwidth): 可通过磁盘阵列或并行磁头提升;
访问时间 (access time): 受机械结构限制, 几乎无法显著改善;


因此 ...</div></div></div><div class="recent-post-item"><div class="recent-post-info no-cover"><a class="article-title" href="/2025/10/02/wesley_knowledge_repo/db/3.normalization/" title="3. Normalization">3. Normalization</a><div class="article-meta-wrap"><span class="post-meta-date"><i class="fas fa-history"></i><span class="article-meta-label">Updated</span><time datetime="2025-10-04T17:34:06.711Z" title="Updated 2025-10-05 01:34:06">2025-10-05</time></span><span class="article-meta tags"><span class="article-meta-separator">|</span><i class="fas fa-tag"></i><a class="article-meta__tags" href="/tags/database/">database</a></span></div><div class="content">为什么需要规范化

坏表的典型问题

冗余 redundancy: 比如 供应商地址, 商品描述被重复存储
插入异常: 插入供应商必须附带商品信息, 关联不大的两个信息要一起插入
删除异常: 删除商品时可能导致供应商信息丢失
更新异常: 修改供应商地址需要更新多行



Normalization 目标: 避免冗余, 找到不同属性之间的依赖性和继承关系

Short Summary: We want tables where the attributes depend on the primary key,
on the whole key, and nothing but (有且仅有) the key.

不过这个方法完全可以用 ER 来解决, 但是这里讲得是另一种思路, 即更加侧重形式化方法实现 functional dependency 的分析和分解.
Redundancy Problems

Redundant Storage: 同样的信息被重复存储, 浪费空间
Update Anomalies: 更新时需要修改多处, 容易出错
Insertion Anomalies: 插入新 ...</div></div></div><div class="recent-post-item"><div class="recent-post-info no-cover"><a class="article-title" href="/2025/10/01/wesley_knowledge_repo/os/historical/20.lottery_scheduling.md/" title="20. Lottery Scheduling: Flexible Proportional-Share Resource Management">20. Lottery Scheduling: Flexible Proportional-Share Resource Management</a><div class="article-meta-wrap"><span class="post-meta-date"><i class="fas fa-history"></i><span class="article-meta-label">Updated</span><time datetime="2025-10-02T01:41:45.956Z" title="Updated 2025-10-02 09:41:45">2025-10-02</time></span></div><div class="content">Lottery Scheduling 基本机制
Resource Rights (资源权利)

彩票 (ticket) 表示资源权利, 具有 三个性质:

抽象 (abstract): 与具体机器细节无关;
相对 (relative): 票所代表的份额随竞争情况 (总彩票数量) 动态变化;
统一 (uniform): 异构资源都能抽象为 tickets; 比如各种 CPU, I/O 设备;



Lotteries (抽签调度)


每次调度就是一次抽签, 任务的获胜概率: p=tTp = \frac{t}{T}p=Tt​, 其中 t = 本任务票数, T = 总票数;


获胜次数服从 binomial distribution; 等待第一次获胜的时间服从 geometric distribution;


长期看, 任务的资源份额 ≈\approx≈ 票份额; 因此保证概率公平 (probabilistic fairness);


任何持有 非零 票数的任务都会在有限时间内赢得抽签, 因此不会出现饿死 (starvation);


问题: 如果一个任务的彩票数量很少, 为什么不 ...</div></div></div><div class="recent-post-item"><div class="recent-post-info no-cover"><a class="article-title" href="/2025/09/30/wesley_knowledge_repo/os/historical/19.scheduler_activation/" title="19. Scheduler Activations: Effective Kernel Support  for the User-Level Management of Parallelism">19. Scheduler Activations: Effective Kernel Support  for the User-Level Management of Parallelism</a><div class="article-meta-wrap"><span class="post-meta-date"><i class="fas fa-history"></i><span class="article-meta-label">Updated</span><time datetime="2025-10-02T00:39:38.686Z" title="Updated 2025-10-02 08:39:38">2025-10-02</time></span><span class="article-meta tags"><span class="article-meta-separator">|</span><i class="fas fa-tag"></i><a class="article-meta__tags" href="/tags/operating-system/">operating_system</a><span class="article-meta-link">•</span><i class="fas fa-tag"></i><a class="article-meta__tags" href="/tags/kernel/">kernel</a><span class="article-meta-link">•</span><i class="fas fa-tag"></i><a class="article-meta__tags" href="/tags/schedule/">schedule</a></span></div><div class="content">背景

并行计算的效果, 取决于创建和管理并行的开销; 开销大的话即使 coarse grained parallelism 也不划算; 开销小的话, 即使 fine grained parallelism 也划算;
传统 UNIX 进程 = 单地址空间 + 单执行流;
设计目标是单核多道程序环境(multiprogramming), 适合粗粒度并行, 不适合细粒度并行;

线程支持的两种方式

用户级线程 (User-level threads)


通过 runtime library 库实现(不改内核);
优点:

性能好: 上下文切换, 创建销毁的代价接近过程调用;
灵活: 可以按语言/应用需求定制;


缺点:

内核对线程不可见, 仍然只认识&quot;进程&quot;;
进程就像虚拟 CPU, 被内核调度到物理 CPU 上;
遇到 I/O 阻塞, 页面缺页, 多道并发 时, 线程库感知不到真实 CPU 情况, 导致性能下降甚至错误;




内核级线程 (Kernel threads)



内核直接提供多线程支持, 每个线程对内核可见, 内核负责调度;


优点:

与 ...</div></div></div><nav id="pagination"><div class="pagination"><span class="page-number current">1</span><a class="page-number" href="/page/2/#content-inner">2</a><span class="space">&hellip;</span><a class="page-number" href="/page/30/#content-inner">30</a><a class="extend next" rel="next" href="/page/2/#content-inner"><i class="fas fa-chevron-right fa-fw"></i></a></div></nav></div><div class="aside-content" id="aside-content"><div class="card-widget card-info"><div class="is-center"><div class="avatar-img"><img src="/img/me_new.jpeg" onerror="this.onerror=null;this.src='/img/friend_404.gif'" alt="avatar"/></div><div class="author-info__name">Yuchen You (Wesley)</div><div class="author-info__description"></div></div><div class="card-info-data site-data is-center"><a href="/archives/"><div class="headline">Articles</div><div class="length-num">300</div></a><a href="/tags/"><div class="headline">Tags</div><div class="length-num">46</div></a><a href="/categories/"><div class="headline">Categories</div><div class="length-num">8</div></a></div><a id="card-info-btn" target="_blank" rel="noopener" href="https://github.com/1WesleyYou"><i class="fab fa-github"></i><span>Follow Me</span></a><div class="card-info-social-icons is-center"><a class="social-icon" href="https://github.com/1Wesleyyou" target="_blank" title="Github"><i class="fab fa-github" style="color: #24292e;"></i></a><a class="social-icon" href="mailto:yuchenxr@umich.edu" target="_blank" title="Email"><i class="fas fa-envelope" style="color: #4a7dbe;"></i></a><a class="social-icon" href="https://www.linkedin.com/in/yuchen-you-a74940314/?locale=en_US" target="_blank" title="LinkedIn"><i class="fab fa-linkedin" style="color: #4a4dbe;"></i></a><a class="social-icon" href="/Yuchen_CV.pdf" target="_blank" title="CV"><i class="fas fa-address-card" style="color: #251456;"></i></a></div></div><div class="card-widget card-announcement"><div class="item-headline"><i class="fas fa-bullhorn fa-shake"></i><span>Announcement</span></div><div class="announcement_content">This is my Blog</div></div><div class="sticky_layout"><div class="card-widget card-recent-post"><div class="item-headline"><i class="fas fa-history"></i><span>Recent Post</span></div><div class="aside-list"><div class="aside-list-item no-cover"><div class="content"><a class="title" href="/2025/11/28/wesley_knowledge_repo/ds/7.spanner/" title="7. 分布式事务系统与 Spanner">7. 分布式事务系统与 Spanner</a><time datetime="2025-11-28T12:55:08.000Z" title="Created 2025-11-28 20:55:08">2025-11-28</time></div></div><div class="aside-list-item no-cover"><div class="content"><a class="title" href="/2025/11/28/wesley_knowledge_repo/ds/6.dynamo/" title="6. Amazon Dynamo 系统">6. Amazon Dynamo 系统</a><time datetime="2025-11-28T12:54:32.000Z" title="Created 2025-11-28 20:54:32">2025-11-28</time></div></div><div class="aside-list-item no-cover"><div class="content"><a class="title" href="/2025/11/28/wesley_knowledge_repo/db/5.transaction/" title="5. Transaction and ACID DB">5. Transaction and ACID DB</a><time datetime="2025-11-28T08:50:38.000Z" title="Created 2025-11-28 16:50:38">2025-11-28</time></div></div><div class="aside-list-item no-cover"><div class="content"><a class="title" href="/2025/11/06/wesley_knowledge_repo/db/4.storage/" title="4. Database Storage Structure">4. Database Storage Structure</a><time datetime="2025-11-06T12:46:22.000Z" title="Created 2025-11-06 20:46:22">2025-11-06</time></div></div><div class="aside-list-item no-cover"><div class="content"><a class="title" href="/2025/10/16/wesley_knowledge_repo/ds/5.paxos/" title="5. Consensus: Paxos Made Simple (not to me)">5. Consensus: Paxos Made Simple (not to me)</a><time datetime="2025-10-16T11:22:07.000Z" title="Created 2025-10-16 19:22:07">2025-10-16</time></div></div></div></div><div class="card-widget card-categories"><div class="item-headline">
            <i class="fas fa-folder-open"></i>
            <span>Categories</span>
            
            </div>
            <ul class="card-category-list" id="aside-cat-list">
            <li class="card-category-list-item "><a class="card-category-list-link" href="/categories/ai/"><span class="card-category-list-name">ai</span><span class="card-category-list-count">27</span></a></li><li class="card-category-list-item "><a class="card-category-list-link" href="/categories/cpp/"><span class="card-category-list-name">cpp</span><span class="card-category-list-count">8</span></a></li><li class="card-category-list-item "><a class="card-category-list-link" href="/categories/cs-basic/"><span class="card-category-list-name">cs_basic</span><span class="card-category-list-count">27</span></a></li><li class="card-category-list-item "><a class="card-category-list-link" href="/categories/cybersecurity/"><span class="card-category-list-name">cybersecurity</span><span class="card-category-list-count">17</span></a></li><li class="card-category-list-item "><a class="card-category-list-link" href="/categories/eecs281/"><span class="card-category-list-name">eecs281</span><span class="card-category-list-count">10</span></a></li><li class="card-category-list-item "><a class="card-category-list-link" href="/categories/hardware/"><span class="card-category-list-name">hardware</span><span class="card-category-list-count">2</span></a></li><li class="card-category-list-item "><a class="card-category-list-link" href="/categories/math/"><span class="card-category-list-name">math</span><span class="card-category-list-count">69</span></a></li><li class="card-category-list-item "><a class="card-category-list-link" href="/categories/physics/"><span class="card-category-list-name">physics</span><span class="card-category-list-count">21</span></a></li>
            </ul></div><div class="card-widget card-tags"><div class="item-headline"><i class="fas fa-tags"></i><span>Tags</span></div><div class="card-tag-cloud"><a href="/tags/dynamic/" style="font-size: 1.15em; color: #999b9e">dynamic</a> <a href="/tags/attention/" style="font-size: 1.1em; color: #999">attention</a> <a href="/tags/logic/" style="font-size: 1.13em; color: #999a9c">logic</a> <a href="/tags/computer-composition/" style="font-size: 1.37em; color: #99a4b2">computer_composition</a> <a href="/tags/golang/" style="font-size: 1.1em; color: #999">golang</a> <a href="/tags/mse/" style="font-size: 1.47em; color: #99a8bc">mse</a> <a href="/tags/discrete-math/" style="font-size: 1.45em; color: #99a7ba">discrete_math</a> <a href="/tags/kernel/" style="font-size: 1.29em; color: #99a0ab">kernel</a> <a href="/tags/linear-algebra/" style="font-size: 1.13em; color: #999a9c">linear_algebra</a> <a href="/tags/database/" style="font-size: 1.21em; color: #999da3">database</a> <a href="/tags/Model/" style="font-size: 1.1em; color: #999">Model</a> <a href="/tags/field/" style="font-size: 1.1em; color: #999">field</a> <a href="/tags/multi-variable-function/" style="font-size: 1.15em; color: #999b9e">multi-variable_function</a> <a href="/tags/container/" style="font-size: 1.1em; color: #999">container</a> <a href="/tags/sql/" style="font-size: 1.1em; color: #999">sql</a> <a href="/tags/ODE/" style="font-size: 1.23em; color: #999ea6">ODE</a> <a href="/tags/cyber-security/" style="font-size: 1.26em; color: #999fa8">cyber_security</a> <a href="/tags/cpp-basic/" style="font-size: 1.29em; color: #99a0ab">cpp_basic</a> <a href="/tags/chaos-system/" style="font-size: 1.13em; color: #999a9c">chaos_system</a> <a href="/tags/dynamics/" style="font-size: 1.42em; color: #99a6b7">dynamics</a> <a href="/tags/machine-learning/" style="font-size: 1.23em; color: #999ea6">machine_learning</a> <a href="/tags/Consensus/" style="font-size: 1.15em; color: #999b9e">Consensus</a> <a href="/tags/transformer/" style="font-size: 1.13em; color: #999a9c">transformer</a> <a href="/tags/computability/" style="font-size: 1.18em; color: #999ca1">computability</a> <a href="/tags/hardware/" style="font-size: 1.1em; color: #999">hardware</a> <a href="/tags/p-np/" style="font-size: 1.13em; color: #999a9c">p_np</a> <a href="/tags/unix/" style="font-size: 1.34em; color: #99a3b0">unix</a> <a href="/tags/clip/" style="font-size: 1.13em; color: #999a9c">clip</a> <a href="/tags/memory/" style="font-size: 1.13em; color: #999a9c">memory</a> <a href="/tags/statistics/" style="font-size: 1.15em; color: #999b9e">statistics</a> <a href="/tags/operating-system/" style="font-size: 1.5em; color: #99a9bf">operating_system</a> <a href="/tags/network/" style="font-size: 1.31em; color: #99a2ad">network</a> <a href="/tags/system-failure/" style="font-size: 1.21em; color: #999da3">system_failure</a> <a href="/tags/information-theory/" style="font-size: 1.1em; color: #999">information_theory</a> <a href="/tags/algorithm/" style="font-size: 1.39em; color: #99a5b5">algorithm</a> <a href="/tags/deep-learning/" style="font-size: 1.26em; color: #999fa8">deep_learning</a> <a href="/tags/structure/" style="font-size: 1.13em; color: #999a9c">structure</a> <a href="/tags/virtual-machine/" style="font-size: 1.21em; color: #999da3">virtual_machine</a> <a href="/tags/optimization/" style="font-size: 1.1em; color: #999">optimization</a> <a href="/tags/schedule/" style="font-size: 1.1em; color: #999">schedule</a></div></div><div class="card-widget card-archives"><div class="item-headline"><i class="fas fa-archive"></i><span>Archives</span><a class="card-more-btn" href="/archives/" title="View More">
    <i class="fas fa-angle-right"></i></a></div><ul class="card-archive-list"><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2025/11/"><span class="card-archive-list-date">November 2025</span><span class="card-archive-list-count">4</span></a></li><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2025/10/"><span class="card-archive-list-date">October 2025</span><span class="card-archive-list-count">5</span></a></li><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2025/09/"><span class="card-archive-list-date">September 2025</span><span class="card-archive-list-count">23</span></a></li><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2025/08/"><span class="card-archive-list-date">August 2025</span><span class="card-archive-list-count">3</span></a></li><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2025/07/"><span class="card-archive-list-date">July 2025</span><span class="card-archive-list-count">9</span></a></li><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2025/06/"><span class="card-archive-list-date">June 2025</span><span class="card-archive-list-count">3</span></a></li><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2025/05/"><span class="card-archive-list-date">May 2025</span><span class="card-archive-list-count">14</span></a></li><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2025/04/"><span class="card-archive-list-date">April 2025</span><span class="card-archive-list-count">3</span></a></li></ul></div><div class="card-widget card-webinfo"><div class="item-headline"><i class="fas fa-chart-line"></i><span>Info</span></div><div class="webinfo"><div class="webinfo-item"><div class="item-name">Article :</div><div class="item-count">300</div></div><div class="webinfo-item"><div class="item-name">UV :</div><div class="item-count" id="busuanzi_value_site_uv"><i class="fa-solid fa-spinner fa-spin"></i></div></div><div class="webinfo-item"><div class="item-name">PV :</div><div class="item-count" id="busuanzi_value_site_pv"><i class="fa-solid fa-spinner fa-spin"></i></div></div><div class="webinfo-item"><div class="item-name">Last Update :</div><div class="item-count" id="last-push-date" data-lastPushDate="2025-11-29T02:34:22.610Z"><i class="fa-solid fa-spinner fa-spin"></i></div></div></div></div></div></div></main><footer id="footer"><div id="footer-wrap"><div class="copyright">&copy;2020 - 2025 By Yuchen You (Wesley)</div><div class="framework-info"><span>Framework </span><a target="_blank" rel="noopener" href="https://hexo.io">Hexo</a><span class="footer-separator">|</span><span>Theme </span><a target="_blank" rel="noopener" href="https://github.com/jerryc127/hexo-theme-butterfly">Butterfly</a></div><div class="footer_custom_text">welcome to my blog!</div></div></footer></div><div id="rightside"><div id="rightside-config-hide"><button id="darkmode" type="button" title="Toggle Between Light And Dark Mode"><i class="fas fa-adjust"></i></button><button id="hide-aside-btn" type="button" title="Toggle between Single-column and Double-column"><i class="fas fa-arrows-alt-h"></i></button></div><div id="rightside-config-show"><button id="rightside-config" type="button" title="Setting"><i class="fas fa-cog fa-spin"></i></button><button id="go-up" type="button" title="Back To Top"><span class="scroll-percent"></span><i class="fas fa-arrow-up"></i></button></div></div><div><script src="/js/utils.js?v=4.13.0"></script><script src="/js/main.js?v=4.13.0"></script><script src="https://cdn.jsdelivr.net/npm/@fancyapps/ui@5.0.33/dist/fancybox/fancybox.umd.min.js"></script><div class="js-pjax"><script>window.typedJSFn = {
  init: (str) => {
    window.typed = new Typed('#subtitle', Object.assign({
      strings: str,
      startDelay: 300,
      typeSpeed: 150,
      loop: true,
      backSpeed: 50,
    }, null))
  },
  run: (subtitleType) => {
    if (true) {
      if (typeof Typed === 'function') {
        subtitleType()
      } else {
        getScript('https://cdn.jsdelivr.net/npm/typed.js@2.1.0/dist/typed.umd.min.js').then(subtitleType)
      }
    } else {
      subtitleType()
    }
  }
}
</script><script>function subtitleType () {
  if (true) {
    typedJSFn.init(["Soused eyes incognizant of heaven merging with the water below","A boatload of airy dreams weighs on the Silver Flow","醉后不知天在水, 满船清梦压星河"])
  } else {
    document.getElementById("subtitle").textContent = "Soused eyes incognizant of heaven merging with the water below"
  }
}
typedJSFn.run(subtitleType)</script></div><canvas class="fireworks" mobile="false"></canvas><script src="https://cdn.jsdelivr.net/npm/butterfly-extsrc@1.1.3/dist/fireworks.min.js"></script><script defer="defer" id="fluttering_ribbon" mobile="false" src="https://cdn.jsdelivr.net/npm/butterfly-extsrc@1.1.3/dist/canvas-fluttering-ribbon.min.js"></script><script async data-pjax src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script><div id="local-search"><div class="search-dialog"><nav class="search-nav"><span class="search-dialog-title">Search</span><span id="loading-status"></span><button class="search-close-button"><i class="fas fa-times"></i></button></nav><div class="is-center" id="loading-database"><i class="fas fa-spinner fa-pulse"></i><span>  Loading the Database</span></div><div class="search-wrap"><div id="local-search-input"><div class="local-search-box"><input class="local-search-box--input" placeholder="Search for Posts" type="text"/></div></div><hr/><div id="local-search-results"></div><div id="local-search-stats-wrap"></div></div></div><div id="search-mask"></div><script src="/js/search/local-search.js?v=4.13.0"></script></div></div></body></html>