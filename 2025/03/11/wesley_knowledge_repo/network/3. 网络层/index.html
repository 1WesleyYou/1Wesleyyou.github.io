<!DOCTYPE html><html lang="en-US" data-theme="light"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0,viewport-fit=cover"><title>3. ç½‘ç»œå±‚ | Yuchen You</title><meta name="author" content="Yuchen You (Wesley)"><meta name="copyright" content="Yuchen You (Wesley)"><meta name="format-detection" content="telephone=no"><meta name="theme-color" content="#ffffff"><meta name="description" content="ç½‘ç»œå±‚åŸºç¡€   æ ¸å¿ƒåŠŸèƒ½:  å¯»å€(Addressing) è½¬å‘(Forwarding): å°†æ•°æ®åŒ…å®šå‘åˆ°æ­£ç¡®æ¥å£(åŸºäºæœ¬åœ°è½¬å‘è¡¨); è·¯ç”±(Routing): å…¨å±€è®¡ç®—è½¬å‘è¡¨(é€šè¿‡è·¯ç”±åè®®);    æ¶æ„åˆ†å±‚:  æ•°æ®å¹³é¢(Data Plane): å¤„ç†å•ä¸ªæ•°æ®åŒ…çš„è½¬å‘(å¿«é€Ÿ, æœ¬åœ°å†³ç­–); æ§åˆ¶å¹³é¢(Control Plane): è®¡ç®—è½¬å‘è¡¨çš„åˆ†å¸ƒå¼ç®—æ³•(å…¨å±€, æ…¢é€Ÿ);     IPåè®®æ ¸å¿ƒ">
<meta property="og:type" content="article">
<meta property="og:title" content="3. ç½‘ç»œå±‚">
<meta property="og:url" content="http://example.com/2025/03/11/wesley_knowledge_repo/network/3.%20%E7%BD%91%E7%BB%9C%E5%B1%82/index.html">
<meta property="og:site_name" content="Yuchen You">
<meta property="og:description" content="ç½‘ç»œå±‚åŸºç¡€   æ ¸å¿ƒåŠŸèƒ½:  å¯»å€(Addressing) è½¬å‘(Forwarding): å°†æ•°æ®åŒ…å®šå‘åˆ°æ­£ç¡®æ¥å£(åŸºäºæœ¬åœ°è½¬å‘è¡¨); è·¯ç”±(Routing): å…¨å±€è®¡ç®—è½¬å‘è¡¨(é€šè¿‡è·¯ç”±åè®®);    æ¶æ„åˆ†å±‚:  æ•°æ®å¹³é¢(Data Plane): å¤„ç†å•ä¸ªæ•°æ®åŒ…çš„è½¬å‘(å¿«é€Ÿ, æœ¬åœ°å†³ç­–); æ§åˆ¶å¹³é¢(Control Plane): è®¡ç®—è½¬å‘è¡¨çš„åˆ†å¸ƒå¼ç®—æ³•(å…¨å±€, æ…¢é€Ÿ);     IPåè®®æ ¸å¿ƒ">
<meta property="og:locale" content="en_US">
<meta property="og:image" content="http://example.com/img/me_new.jpeg">
<meta property="article:published_time" content="2025-03-11T04:08:08.000Z">
<meta property="article:modified_time" content="2025-03-23T19:13:37.105Z">
<meta property="article:author" content="Yuchen You (Wesley)">
<meta property="article:tag" content="cyber_security">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="http://example.com/img/me_new.jpeg"><link rel="shortcut icon" href="/img/hackerrank.svg"><link rel="canonical" href="http://example.com/2025/03/11/wesley_knowledge_repo/network/3.%20%E7%BD%91%E7%BB%9C%E5%B1%82/index.html"><link rel="preconnect" href="//cdn.jsdelivr.net"/><link rel="preconnect" href="//busuanzi.ibruce.info"/><link rel="stylesheet" href="/css/index.css?v=4.13.0"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@6.5.1/css/all.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fancyapps/ui@5.0.33/dist/fancybox/fancybox.min.css" media="print" onload="this.media='all'"><script>const GLOBAL_CONFIG = {
  root: '/',
  algolia: undefined,
  localSearch: {"path":"/search.xml","preload":false,"top_n_per_article":1,"unescape":false,"languages":{"hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found"}},
  translate: undefined,
  noticeOutdate: undefined,
  highlight: {"plugin":"highlight.js","highlightCopy":true,"highlightLang":true,"highlightHeightLimit":false},
  copy: {
    success: 'Copy Successful',
    error: 'Copy Error',
    noSupport: 'Browser Not Supported'
  },
  relativeDate: {
    homepage: true,
    post: true
  },
  runtime: '',
  dateSuffix: {
    just: 'Just now',
    min: 'minutes ago',
    hour: 'hours ago',
    day: 'days ago',
    month: 'months ago'
  },
  copyright: undefined,
  lightbox: 'fancybox',
  Snackbar: undefined,
  infinitegrid: {
    js: 'https://cdn.jsdelivr.net/npm/@egjs/infinitegrid@4.11.1/dist/infinitegrid.min.js',
    buttonText: 'Load More'
  },
  isPhotoFigcaption: false,
  islazyload: false,
  isAnchor: false,
  percent: {
    toc: true,
    rightside: false,
  },
  autoDarkmode: false
}</script><script id="config-diff">var GLOBAL_CONFIG_SITE = {
  title: '3. ç½‘ç»œå±‚',
  isPost: true,
  isHome: false,
  isHighlightShrink: false,
  isToc: true,
  postUpdate: '2025-03-24 03:13:37'
}</script><script>(win=>{
      win.saveToLocal = {
        set: (key, value, ttl) => {
          if (ttl === 0) return
          const now = Date.now()
          const expiry = now + ttl * 86400000
          const item = {
            value,
            expiry
          }
          localStorage.setItem(key, JSON.stringify(item))
        },
      
        get: key => {
          const itemStr = localStorage.getItem(key)
      
          if (!itemStr) {
            return undefined
          }
          const item = JSON.parse(itemStr)
          const now = Date.now()
      
          if (now > item.expiry) {
            localStorage.removeItem(key)
            return undefined
          }
          return item.value
        }
      }
    
      win.getScript = (url, attr = {}) => new Promise((resolve, reject) => {
        const script = document.createElement('script')
        script.src = url
        script.async = true
        script.onerror = reject
        script.onload = script.onreadystatechange = function() {
          const loadState = this.readyState
          if (loadState && loadState !== 'loaded' && loadState !== 'complete') return
          script.onload = script.onreadystatechange = null
          resolve()
        }

        Object.keys(attr).forEach(key => {
          script.setAttribute(key, attr[key])
        })

        document.head.appendChild(script)
      })
    
      win.getCSS = (url, id = false) => new Promise((resolve, reject) => {
        const link = document.createElement('link')
        link.rel = 'stylesheet'
        link.href = url
        if (id) link.id = id
        link.onerror = reject
        link.onload = link.onreadystatechange = function() {
          const loadState = this.readyState
          if (loadState && loadState !== 'loaded' && loadState !== 'complete') return
          link.onload = link.onreadystatechange = null
          resolve()
        }
        document.head.appendChild(link)
      })
    
      win.activateDarkMode = () => {
        document.documentElement.setAttribute('data-theme', 'dark')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#0d0d0d')
        }
      }
      win.activateLightMode = () => {
        document.documentElement.setAttribute('data-theme', 'light')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#ffffff')
        }
      }
      const t = saveToLocal.get('theme')
    
        if (t === 'dark') activateDarkMode()
        else if (t === 'light') activateLightMode()
      
      const asideStatus = saveToLocal.get('aside-status')
      if (asideStatus !== undefined) {
        if (asideStatus === 'hide') {
          document.documentElement.classList.add('hide-aside')
        } else {
          document.documentElement.classList.remove('hide-aside')
        }
      }
    
      const detectApple = () => {
        if(/iPad|iPhone|iPod|Macintosh/.test(navigator.userAgent)){
          document.documentElement.classList.add('apple')
        }
      }
      detectApple()
    })(window)</script><meta name="generator" content="Hexo 7.2.0"><link href="https://cdn.bootcss.com/KaTeX/0.11.1/katex.min.css" rel="stylesheet" /></head><body><div id="web_bg"></div><div id="sidebar"><div id="menu-mask"></div><div id="sidebar-menus"><div class="avatar-img is-center"><img src="/img/me_new.jpeg" onerror="onerror=null;src='/img/friend_404.gif'" alt="avatar"/></div><div class="sidebar-site-data site-data is-center"><a href="/archives/"><div class="headline">Articles</div><div class="length-num">234</div></a><a href="/tags/"><div class="headline">Tags</div><div class="length-num">33</div></a><a href="/categories/"><div class="headline">Categories</div><div class="length-num">8</div></a></div><hr class="custom-hr"/><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> Home</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fas fa-archive"></i><span> Archives</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fas fa-tags"></i><span> Tags</span></a></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw fas fa-folder-open"></i><span> Categories</span></a></div><div class="menus_item"><a class="site-page" href="/about/"><i class="fa-fw fas fa-heart"></i><span> About</span></a></div></div></div></div><div class="post" id="body-wrap"><header class="post-bg" id="page-header" style="background-image: url('/img/math_master.jpeg')"><nav id="nav"><span id="blog-info"><a href="/" title="Yuchen You"><img class="site-icon" src="/img/avatar.png"/><span class="site-name">Yuchen You</span></a></span><div id="menus"><div id="search-button"><a class="site-page social-icon search" href="javascript:void(0);"><i class="fas fa-search fa-fw"></i><span> Search</span></a></div><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> Home</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fas fa-archive"></i><span> Archives</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fas fa-tags"></i><span> Tags</span></a></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw fas fa-folder-open"></i><span> Categories</span></a></div><div class="menus_item"><a class="site-page" href="/about/"><i class="fa-fw fas fa-heart"></i><span> About</span></a></div></div><div id="toggle-menu"><a class="site-page" href="javascript:void(0);"><i class="fas fa-bars fa-fw"></i></a></div></div></nav><div id="post-info"><h1 class="post-title">3. ç½‘ç»œå±‚</h1><div id="post-meta"><div class="meta-firstline"><span class="post-meta-date"><i class="far fa-calendar-alt fa-fw post-meta-icon"></i><span class="post-meta-label">Created</span><time class="post-meta-date-created" datetime="2025-03-11T04:08:08.000Z" title="Created 2025-03-11 12:08:08">2025-03-11</time><span class="post-meta-separator">|</span><i class="fas fa-history fa-fw post-meta-icon"></i><span class="post-meta-label">Updated</span><time class="post-meta-date-updated" datetime="2025-03-23T19:13:37.105Z" title="Updated 2025-03-24 03:13:37">2025-03-24</time></span><span class="post-meta-categories"><span class="post-meta-separator">|</span><i class="fas fa-inbox fa-fw post-meta-icon"></i><a class="post-meta-categories" href="/categories/cybersecurity/">cybersecurity</a></span></div><div class="meta-secondline"><span class="post-meta-separator">|</span><span class="post-meta-pv-cv" id="" data-flag-title="3. ç½‘ç»œå±‚"><i class="far fa-eye fa-fw post-meta-icon"></i><span class="post-meta-label">Post Views:</span><span id="busuanzi_value_page_pv"><i class="fa-solid fa-spinner fa-spin"></i></span></span></div></div></div></header><main class="layout" id="content-inner"><div id="post"><article class="post-content" id="article-container"><h2 id="ç½‘ç»œå±‚åŸºç¡€">ç½‘ç»œå±‚åŸºç¡€</h2>
<ul>
<li>
<p><strong>æ ¸å¿ƒåŠŸèƒ½</strong>:</p>
<ul>
<li>å¯»å€(Addressing)</li>
<li>è½¬å‘(Forwarding): å°†æ•°æ®åŒ…å®šå‘åˆ°æ­£ç¡®æ¥å£(åŸºäºæœ¬åœ°è½¬å‘è¡¨);</li>
<li>è·¯ç”±(Routing): å…¨å±€è®¡ç®—è½¬å‘è¡¨(é€šè¿‡è·¯ç”±åè®®);</li>
</ul>
</li>
<li>
<p><strong>æ¶æ„åˆ†å±‚</strong>:</p>
<ul>
<li><strong>æ•°æ®å¹³é¢(Data Plane)</strong>: å¤„ç†å•ä¸ªæ•°æ®åŒ…çš„è½¬å‘(å¿«é€Ÿ, æœ¬åœ°å†³ç­–);</li>
<li><strong>æ§åˆ¶å¹³é¢(Control Plane)</strong>: è®¡ç®—è½¬å‘è¡¨çš„åˆ†å¸ƒå¼ç®—æ³•(å…¨å±€, æ…¢é€Ÿ);</li>
</ul>
</li>
</ul>
<hr>
<h2 id="ipåè®®æ ¸å¿ƒè®¾è®¡">IPåè®®æ ¸å¿ƒè®¾è®¡</h2>
<ul>
<li>
<p><strong>IPæ•°æ®åŒ…ç»“æ„</strong>:</p>
<ul>
<li>
<p><strong>Header</strong>:</p>
<table>
<thead>
<tr>
<th>å­—æ®µå</th>
<th>ä½æ•°</th>
<th>åŠŸèƒ½</th>
</tr>
</thead>
<tbody>
<tr>
<td>ç‰ˆæœ¬å·(Version)</td>
<td>4</td>
<td>æ ‡è¯†IPç‰ˆæœ¬(å¦‚IPv4=4);</td>
</tr>
<tr>
<td>å¤´éƒ¨é•¿åº¦(IHL)</td>
<td>4</td>
<td>ä»¥32ä½<strong>word</strong>ä¸ºå•ä½çš„<strong>å¤´éƒ¨é•¿åº¦</strong>(å¦‚æ— é€‰é¡¹æ—¶ä¸º5, å¯¹åº”20å­—èŠ‚, æœ€é•¿ 60B å› ä¸º IHL æœ€é•¿ 4bit å³ 0xF word = 60B);</td>
</tr>
<tr>
<td>æœåŠ¡ç±»å‹(ToS/DSCP)</td>
<td>8</td>
<td>å®šä¹‰ä¼˜å…ˆçº§æˆ–æ‹¥å¡é€šçŸ¥(å¦‚ECN);</td>
</tr>
<tr>
<td>æ€»é•¿åº¦(Total Length)</td>
<td>16</td>
<td>æ•´ä¸ªIPåŒ…çš„æ€»å­—èŠ‚æ•°(æœ€å¤§65535å­—èŠ‚);</td>
</tr>
<tr>
<td>ç”Ÿå­˜æ—¶é—´(TTL)</td>
<td>8</td>
<td>é˜²ç¯è·¯, æ¯ç»è¿‡ä¸€è·³å‡1, å½’é›¶æ—¶ä¸¢å¼ƒåŒ…;</td>
</tr>
<tr>
<td>åè®®(Protocol)</td>
<td>8</td>
<td>æ ‡è¯†ä¸Šå±‚åè®®(å¦‚TCP=6, UDP=17);</td>
</tr>
<tr>
<td>å¤´éƒ¨æ ¡éªŒå’Œ(Checksum)</td>
<td>16</td>
<td>ä»…æ ¡éªŒå¤´éƒ¨å®Œæ•´æ€§, æ¯è·³é‡æ–°è®¡ç®—;</td>
</tr>
<tr>
<td>æº/ç›®çš„IPåœ°å€</td>
<td>32Ã—2</td>
<td>ç«¯åˆ°ç«¯é€šä¿¡çš„åŸºç¡€;</td>
</tr>
</tbody>
</table>
</li>
<li>
<p><strong>åˆ†ç‰‡ç›¸å…³å­—æ®µ</strong>:</p>
<ul>
<li><strong>æ ‡è¯†ç¬¦(Identification)</strong>: å”¯ä¸€æ ‡è®°åŒä¸€åŸå§‹åŒ…çš„åˆ†ç‰‡;</li>
<li><strong>æ ‡å¿—ä½(Flags)</strong>:
<ul>
<li>DF(Donâ€™t Fragment): ç¦æ­¢åˆ†ç‰‡(è‹¥MTUä¸è¶³åˆ™ä¸¢å¼ƒå¹¶è¿”å›ICMPé”™è¯¯);</li>
<li>MF(More Fragments): æ ‡è®°æ˜¯å¦ä¸ºæœ€åä¸€ä¸ªåˆ†ç‰‡;</li>
</ul>
</li>
<li><strong>åç§»é‡(Fragment Offset)</strong>: ä»¥8å­—èŠ‚ä¸ºå•ä½, æŒ‡ç¤ºåˆ†ç‰‡åœ¨åŸå§‹åŒ…ä¸­çš„ä½ç½®;</li>
</ul>
</li>
</ul>
</li>
<li>
<p><strong>TTL (8b): é˜²æ­¢ loop</strong></p>
<ul>
<li><strong>ç›®çš„</strong>: é˜²æ­¢æ•°æ®åŒ…åœ¨ç½‘ç»œä¸­æ— é™å¾ªç¯;</li>
<li><strong>å®ç°</strong>: æ¯ç»è¿‡ä¸€ä¸ªè·¯ç”±å™¨, TTL å€¼å‡1, å½“ TTL ä¸º0 æ—¶, è·¯ç”±å™¨ä¸¢å¼ƒè¯¥åŒ…å¹¶å‘é€ <strong>Time exceeded</strong> é”™è¯¯æ¶ˆæ¯ç»™ src;</li>
</ul>
</li>
<li>
<p><strong>æ ¡éªŒå’Œ(Checksum)</strong>: ä»…æ ¡éªŒå¤´éƒ¨, æ¯ç»è¿‡ä¸€ä¸ªè·¯ç”±å™¨éœ€é‡æ–°è®¡ç®—;</p>
<ul>
<li>ç”±äº header çš„ ttl åœ¨æ¯ä¸€ä¸ªè·¯ç”±å™¨éƒ½ä¼šå‘ç”Ÿå˜åŒ–, æ‰€ä»¥æ¯ä¸€ä¸ªè·¯ç”±å™¨éƒ½éœ€è¦é‡æ–°è®¡ç®—æ ¡éªŒå’Œ</li>
</ul>
</li>
<li>
<p><strong>Type of Service (ToS)</strong>: æ”¯æŒ ä¼˜å…ˆçº§å’ŒæœåŠ¡è´¨é‡(QoS) ç‰¹æ®Šå¤„ç†</p>
<ul>
<li><strong>ç›®çš„</strong>: å¯é’ˆå¯¹æœåŠ¡ priority, congestion notification ç‰¹æ®Šå¤„ç†ä¸€äº›åŒ…;</li>
<li>ç°åœ¨ç§°ä¸º DSCP (Differentiated Service Code Point)</li>
</ul>
</li>
<li>
<p><strong>Options</strong>: å¯é€‰å­—æ®µ, ç”¨äºè°ƒè¯•æˆ–ç‰¹æ®Šéœ€æ±‚;</p>
<ul>
<li><strong>ç¤ºä¾‹</strong>: è®°å½•è·¯ç”±(Record Router), æ—¶é—´æˆ³(Timestamp), Strict/Loose Source Route ç­‰;</li>
</ul>
</li>
<li>
<p><strong>Protocol</strong>: æŒ‡æ˜ä¸Šå±‚åè®®ç±»å‹;</p>
<ul>
<li><strong>å¸¸è§å€¼</strong>: TCP=6, UDP=17, ICMP=1;</li>
<li><strong>ä½œç”¨</strong>: help with demultiplexing at the destination;
<ul>
<li>æ¥æ”¶æ–¹ task: 1. æ ¹æ® transport layer header æ¥ç¡®å®šä¸Šå±‚æ‰§è¡Œå‡½æ•°;  2. å‘é€<br>
response åˆ°src</li>
</ul>
</li>
</ul>
</li>
</ul>
<hr>
<h2 id="åˆ†ç‰‡ä¸é‡ç»„-fragmentation-and-reassembly">åˆ†ç‰‡ä¸é‡ç»„ Fragmentation and Reassembly</h2>
<ul>
<li><strong>åˆ†ç‰‡è§¦å‘æ¡ä»¶</strong>: æ•°æ®åŒ…è¶…è¿‡é“¾è·¯MTU(å¦‚IPv4é»˜è®¤1500å­—èŠ‚);</li>
<li><strong>é‡ç»„çš„é—®é¢˜</strong>:
<ul>
<li>Fragment can get lost;</li>
<li>Fragment can follow diff path;</li>
<li>Fragment can get fragmented again -&gt; åœ¨ä¸­é—´é‡ç»„æœ‰ç‚¹å°ä¸‘ğŸ¤¡,<br>
ä¸”å®¹æ˜“å¯¼è‡´ç½‘ç»œè´Ÿè½½è¿‡é‡</li>
<li><strong>ç»“è®º</strong>: é‡ç»„åªèƒ½åœ¨ destination è¿›è¡Œ, ä¸­é—´è·¯ç”±å™¨ä¸å¤„ç†åˆ†ç‰‡;</li>
</ul>
</li>
<li><strong>é‡ç»„é€»è¾‘</strong>:
<ul>
<li><strong>é‡ç»„ä¾æ® (IPv4)</strong>:
<ul>
<li>ä¸ºäº†åŒºåˆ† packet å±äºåŒä¸€åŸå§‹åŒ…, ä½¿ç”¨ <strong>æ ‡è¯†ç¬¦</strong> (Identifier);</li>
<li>ç¡®è®¤ frag æ˜¯å¦æœ‰ä¸¢åŒ…, éœ€è¦ åç§»é‡ (Fragment Offset), unit 8 Bytes;</li>
<li>åˆ¤æ–­æ˜¯å¦æœ€åä¸€ä¸ª frag, ä½¿ç”¨ <strong>MF</strong> (More Fragments Coming);</li>
<li>ç¡®ä¿æŸäº›åˆ‡ç‰‡ä¸ä¼šå†è¢«åˆ†ç‰‡, ä½¿ç”¨ <strong>DF</strong> (Donâ€™t Fragment);</li>
<li>é¢å¤–ä¿ç•™ 1b (Reserved)</li>
</ul>
</li>
</ul>
</li>
</ul>
<hr>
<h2 id="ipv6æ”¹è¿›ä¸è®¾è®¡å“²å­¦">IPv6æ”¹è¿›ä¸è®¾è®¡å“²å­¦</h2>
<ul>
<li><strong>æ ¸å¿ƒæ”¹åŠ¨</strong>:
<ul>
<li><strong>åœ°å€æ‰©å±•</strong>: 128ä½åœ°å€(å½»åº•è§£å†³IPv4åœ°å€è€—å°½é—®é¢˜);</li>
<li><strong>ç®€åŒ–å¤´éƒ¨</strong>:
<ul>
<li>eliminate fragmentation (åˆ†ç‰‡ç”±ç»ˆç«¯å¤„ç†);</li>
<li>eliminate checksum (ä¾èµ–ä¸Šå±‚åè®®æ ¡éªŒ, å¦‚TCP/UDP);</li>
<li>new options mechanism: é€šè¿‡&quot;Next Header&quot;å­—æ®µé“¾å¼æ‰©å±•(æ›´çµæ´»);</li>
<li>eliminate header length;</li>
<li>add Flow Label: æ ‡è®°æ•°æ®æµ, æ”¯æŒQoS, help classify;</li>
</ul>
</li>
</ul>
</li>
<li><strong>è®¾è®¡åŸåˆ™</strong>:
<ul>
<li><strong>ç«¯åˆ°ç«¯åŸåˆ™ E2E</strong>: å°†å¤æ‚åŠŸèƒ½(å¦‚åˆ†ç‰‡, æ ¡éªŒ)ç§»è‡³ç»ˆç«¯;</li>
<li><strong>é«˜æ•ˆæ€§</strong>: å‡å°‘è·¯ç”±å™¨å¤„ç†å¼€é”€(å¦‚å»æ ¡éªŒå’Œ, å›ºå®šå¤´éƒ¨);</li>
</ul>
</li>
</ul>
<hr>
<h2 id="å…³é”®å¯¹æ¯”-ipv4-vs-ipv6">å…³é”®å¯¹æ¯”: IPv4 vs IPv6</h2>
<table>
<thead>
<tr>
<th>ç‰¹æ€§</th>
<th>IPv4</th>
<th>IPv6</th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>åœ°å€é•¿åº¦</strong></td>
<td>32ä½</td>
<td>128ä½</td>
</tr>
<tr>
<td><strong>åˆ†ç‰‡</strong></td>
<td>æ”¯æŒè·¯ç”±å™¨åˆ†ç‰‡</td>
<td>ä»…ç»ˆç«¯åˆ†ç‰‡</td>
</tr>
<tr>
<td><strong>æ ¡éªŒå’Œ</strong></td>
<td>å¤´éƒ¨æ ¡éªŒå’Œ</td>
<td>æ— (ä¾èµ–ä¸Šå±‚)</td>
</tr>
<tr>
<td><strong>å¤´éƒ¨é•¿åº¦</strong></td>
<td>å¯å˜(å«é€‰é¡¹)</td>
<td>å›ºå®š40å­—èŠ‚</td>
</tr>
<tr>
<td><strong>æµæ ‡ç­¾</strong></td>
<td>æ— </td>
<td>æ”¯æŒ20ä½æµæ ‡ç­¾</td>
</tr>
</tbody>
</table>
<p><img src="/images/ipv4v6comparison.png" alt="ipv4v6comparison.png"></p>
<hr>
<h2 id="è·¯ç”±å™¨-data-plane">è·¯ç”±å™¨ Data Plane</h2>
<h3 id="ipè·¯ç”±å™¨åŸºç¡€">IPè·¯ç”±å™¨åŸºç¡€</h3>
<ul>
<li><strong>æ ¸å¿ƒä½œç”¨</strong>: äº’è”ç½‘åŸºç¡€è®¾æ–½çš„æ ¸å¿ƒç»„ä»¶, å¸‚åœºè§„æ¨¡è¶…1200äº¿ç¾å…ƒ, ä¸»è¦å‚å•†(Cisco, Huawei, Juniper);</li>
<li><strong>å®¹é‡å®šä¹‰</strong>:
<ul>
<li>å…¬å¼: <code>Router capacity = N Ã— R</code>
<ul>
<li>ä¹Ÿå°±æ˜¯é€šè¿‡å‡ºå£é€Ÿç‡æ¥å®šä¹‰è·¯ç”±å™¨çš„å®¹é‡;</li>
</ul>
</li>
<li><code>N</code>: è·¯ç”±å™¨ç«¯å£æ•°, <code>R</code>: ç«¯å£çº¿é€Ÿ(å¦‚10/40/100 Gbps);</li>
</ul>
</li>
<li><strong>è·¯ç”±å™¨ç±»å‹</strong>:
<ul>
<li><strong>æ ¸å¿ƒè·¯ç”±å™¨ Core</strong>: é«˜å¸¦å®½(100Tbpsèšåˆ), ç«¯å£é€Ÿç‡è¾¾400Gbps;</li>
<li><strong>è¾¹ç¼˜è·¯ç”±å™¨ Edge</strong>: ä¸­ç­‰å¸¦å®½(1Tbpsèšåˆ), ç«¯å£é€Ÿç‡100Gbps;
<ul>
<li><strong>å°å‹ä¼ä¸šè·¯ç”±å™¨</strong>: ä½å¸¦å®½(&lt;10Gbps), ç«¯å£é€Ÿç‡1Gbpsä»¥ä¸‹;</li>
</ul>
</li>
</ul>
</li>
</ul>
<hr>
<h3 id="è·¯ç”±å™¨å†…éƒ¨ç»“æ„">è·¯ç”±å™¨å†…éƒ¨ç»“æ„</h3>
<ul>
<li><strong>æ§åˆ¶å¹³é¢ Control Plane</strong>: è·¯ç”±/æ§åˆ¶å¤„ç†å™¨, è´Ÿè´£è·¯ç”±å†³ç­–;</li>
<li><strong>æ•°æ®å¹³é¢ Data Plane</strong>:
<ul>
<li><strong>è¾“å…¥çº¿å¡ input linecard</strong>:
<ul>
<li>ä»»åŠ¡: æ¥æ”¶åŒ…, æ›´æ–°IPå¤´(TTL, æ ¡éªŒç­‰), æ‰§è¡Œæœ€é•¿å‰ç¼€åŒ¹é…(LPM)æ¥æŸ¥æ‰¾output<br>
linecard, queue the packet at the interconnection fabric;</li>
<li>æœ€å¤§éš¾åº¦: <strong>é«˜é€Ÿå¤„ç†</strong>(100BåŒ…@200Gbps â†’ æ¯4nså¤„ç†ä¸€ä¸ªåŒ…), ä¾èµ–ASIC/ç½‘ç»œå¤„ç†å™¨;</li>
</ul>
</li>
<li><strong>äº¤æ¢ç»“æ„ switch fabric</strong>: è¿æ¥è¾“å…¥ä¸è¾“å‡ºç«¯å£, å¸¸è§æ–¹å¼:
<ul>
<li>å…±äº«å†…å­˜, æ€»çº¿, äº¤å‰å¼€å…³(éé˜»å¡, å¦‚Crossbar);</li>
</ul>
</li>
<li><strong>è¾“å‡ºçº¿å¡ output linecard</strong>:
<ul>
<li>åŠŸèƒ½: åŒ…åˆ†ç±»(å¤šç»´åº¦èŒƒå›´åŒ¹é…), ç¼“å†²åŒºç®¡ç†(å¦‚Drop-Tail), è°ƒåº¦ç®—æ³•;</li>
</ul>
</li>
</ul>
</li>
</ul>
<h4 id="çº¿å¡-linecard">çº¿å¡ Linecard</h4>
<p>ä¸€ä¸ªçº¿å¡å¯ä»¥åŒæ—¶ä½œä¸ºæ¥æ”¶ç«¯å’Œå‘é€ç«¯, å…¶ä¸å¯¹åº”çš„ ip åœ°å€ +<br>
ç«¯å£ä¸€ä¸€å¯¹åº” (ä¹Ÿæœ‰å¯èƒ½ä¼šæœ‰å¤šä¸ª ip åœ°å€å¯¹åº”ä¸€ä¸ªç«¯å£è¿›è¡Œ broadcast)</p>
<h4 id="input-linecard-tasks">Input Linecard Tasks</h4>
<ul>
<li><strong>æ›´æ–°</strong>: æ›´æ–°IPå¤´éƒ¨(TTL, æ ¡éªŒå’Œç­‰), è¾ƒä¸ºç®€å•;</li>
<li><strong>æœ€é•¿å‰ç¼€åŒ¹é…(LPM)</strong>: æ¯”è¾ƒå›°éš¾
<ul>
<li>ç›®æ ‡: æ ¹æ®ç›®æ ‡IPåœ°å€æŸ¥æ‰¾æœ€ä½³åŒ¹é…ç«¯å£;</li>
<li>å®ç°: æ ‘çŠ¶æ•°æ®ç»“æ„(å¦‚Trieæ ‘)ä¼˜åŒ–æŸ¥æ‰¾æ•ˆç‡(O(log n));</li>
<li>ç¤ºä¾‹: åœ°å€èŒƒå›´åˆ†å±‚åŒ¹é…(å¦‚<code>110000xx</code>â†’Port1, <code>1101xxxx</code>â†’Port4);</li>
</ul>
</li>
</ul>
<p>è¿™é‡Œçš„å›°éš¾å¾€å¾€é€šè¿‡ç¡¬ä»¶åŠ é€Ÿæ¥è§£å†³</p>
<h4 id="output-linecard-tasks">Output Linecard Tasks</h4>
<ul>
<li><strong>åˆ†ç±» Classification</strong>: map packets to different flows;</li>
<li><strong>ç¼“å†²åŒºç®¡ç† Buffer Management</strong>: é¿å…æ‹¥å¡, å†³å®šä½•æ—¶ä¸¢ä½•åŒ…;</li>
<li><strong>è°ƒåº¦ç®—æ³• Scheduler</strong>: å†³å®šä½•æ—¶å‘é€ä½•åŒ…, ä¿è¯å…¬å¹³æ€§;</li>
</ul>
<h5 id="åˆ†ç±»æ–¹æ³•-classification">åˆ†ç±»æ–¹æ³• Classification</h5>
<ol>
<li>src/dest IP address/TCP port</li>
<li>Type of Service (ToS) field in</li>
<li>Type of Protocol (TCP/UDP)</li>
</ol>
<h5 id="è°ƒåº¦ç®—æ³•-scheduler">è°ƒåº¦ç®—æ³• Scheduler</h5>
<ol>
<li>æ¯ä¸€ä¸ª flow éƒ½åº”è¯¥æœ‰å¯¹åº”çš„ queue, scheduler åº”è¯¥å†³å®šçš„æ˜¯å“ªä¸€ä¸ª queue åº”è¯¥è¢«å‘é€</li>
<li>è°ƒåº¦ç®—æ³•çš„ç›®çš„æ˜¯ fast, å…¼é¡¾ fairness/priority</li>
</ol>
<h6 id="round-robin">Round-Robin</h6>
<ul>
<li>æ¯ä¸ªé˜Ÿåˆ—è½®æµå‘é€ä¸€ä¸ªåŒ…, è¡¨é¢ä¸Šæœ€å…¬å¹³çš„ç®—æ³•</li>
<li>å¦‚æœè½®è¯¢ä¹‹é—´æ²¡æœ‰ä»»ä½•å·®å¼‚, ç§°ä¸º fair-queue (FQ) æ–¹æ³•</li>
<li>å¦‚æœä¼šæ ¹æ®åŒ…çš„å¤§å°(æ­£æ¯”å…³ç³»)æ¥è°ƒæ•´, ç§°ä¸º weighted fair-queue (WFQ) æ–¹æ³•,<br>
å¦‚æœæ¯ä¸ªé˜Ÿåˆ—æƒé‡ç›¸ç­‰, é‚£ä¹ˆå°±æ˜¯ FQ</li>
</ul>
<h5 id="ä¸åŒçš„è¾“å‡ºæ–¹å¼">ä¸åŒçš„è¾“å‡ºæ–¹å¼</h5>
<ul>
<li><strong>FIFO</strong>: æœ€ç®€å•çš„å¤„ç†æ–¹å¼
<ol>
<li>no classification</li>
<li>drop-tail buffer management: å½“ buffer å·²ç»æ»¡äº†åˆ™ä¸¢å¼ƒæ–°æ¥çš„åŒ…</li>
<li>FIFO scheduling: æŒ‰ç…§åŒ…åˆ°è¾¾çš„é¡ºåºæ¥å‘é€åŒ…</li>
</ol>
</li>
</ul>
<hr>
<h3 id="è·¯ç”±å™¨è¾…åŠ©çš„æ‹¥å¡æ§åˆ¶">è·¯ç”±å™¨è¾…åŠ©çš„æ‹¥å¡æ§åˆ¶</h3>
<ul>
<li><strong>3 ä¸ªæ ¸å¿ƒç›®æ ‡</strong>:
<ul>
<li>éš”ç¦»æµé‡(å…¬å¹³æ€§), è°ƒæ•´é€Ÿç‡, æ£€æµ‹æ‹¥å¡;</li>
</ul>
</li>
</ul>
<h4 id="å…¬å¹³æ€§æ¨¡å‹-isolation-fairness">å…¬å¹³æ€§æ¨¡å‹ Isolation/Fairness</h4>
<ul>
<li><strong>æœ€å¤§æœ€å°å…¬å¹³æ€§ Max-Min Fairness</strong>:
<ul>
<li>å…¬å¼: <code>a_i = min(f, r_i)</code>, <code>âˆ‘a_i = C</code> è¡¨ç¤ºæ€»ç‰©ç†å¸¦å®½çš„ bottleneck;</li>
<li>ç¤ºä¾‹: æ€»å¸¦å®½10G, éœ€æ±‚8G/6G/2G â†’ åˆ†é…4G/4G/2G;</li>
<li>ç‰¹ç‚¹æè¿°: å¦‚æœä½ çš„æµé‡æ²¡æœ‰è¾¾åˆ°ä½ æ”¶å‘ç«¯å£é€Ÿç‡ä¸Šé™,<br>
é‚£ä¹ˆæ²¡æœ‰åˆ«çš„ç«¯åˆ°ç«¯æµé‡ä¼šå¤§äºä½ çš„æµé‡</li>
<li>è¿™äº‹å®ä¸Šæ˜¯ FQ çš„ä¸€ä¸ªç‰¹ä¾‹æˆ–è€…è¯´ç†æƒ³çŠ¶æ€</li>
</ul>
</li>
<li><strong>å…¬å¹³é˜Ÿåˆ—(FQ)</strong>: éš”ç¦»æµé‡, é¿å…RTTä¾èµ–, å…è®¸çµæ´»é€Ÿç‡è°ƒæ•´;
<ul>
<li>bit-by-bit fairness: æ¯åœ¨ä¸€ä¸ªé˜Ÿåˆ—å‘é€ä¸€ä¸ª bit å°±åˆ‡æ¢åˆ°å¦ä¸€ä¸ªé˜Ÿåˆ—,<br>
å¹¶ä¸”è®¡ç®—è™šæ‹Ÿæ—¶é—´, æŠŠè™šæ‹Ÿæ—¶é—´æœ€çŸ­çš„æ”¾åˆ°æœ€å‰é¢æ¥å‘é€, ä¼˜ç‚¹æ˜¯ä¿è¯å…¬å¹³æ€§, æœ€ç»ˆå¯¼è‡´ Max-Min</li>
</ul>
</li>
<li><strong>MMF å’Œ FIFO çš„å¯¹æ¯”</strong>
<ul>
<li>FQ ä¼˜ç‚¹:
<ul>
<li>Isolation: cheating flows æ— æ•ˆäº†</li>
<li>BW share ä¸ RTT æ— å…³</li>
<li>æ¯ä¸ª flow éƒ½å¯ä»¥é€‰æ‹©è‡ªå·±éœ€è¦çš„è°ƒæ•´ç­–ç•¥</li>
</ul>
</li>
<li>FQ ç¼ºç‚¹:
<ul>
<li>æ›´åŠ å¤æ‚, éœ€è¦ä¿å­˜æ›´å¤šçš„çŠ¶æ€å¦‚ queue state ä»¥åŠ packet book-keeping</li>
</ul>
</li>
</ul>
</li>
<li>FQ å¯¹äºé“¾è·¯æ‹¥å¡çš„æ§åˆ¶: åªèƒ½æ§åˆ¶æ‹¥å¡ä½†æ˜¯ä¸èƒ½æ¶ˆé™¤æ‹¥å¡, å› ä¸ºæ‹¥å¡æ˜¯ç”±äºé“¾è·¯çš„å¸¦å®½ä¸è¶³å¯¼è‡´çš„
<ul>
<li>ä¾‹: å¦‚æœä¸¤æ¡å¤§å¸¦å®½é“¾è·¯é€šè¿‡ä¸€æ¡ä¸­ç­‰å¸¦å®½å…±äº«é“¾è·¯è¿æ¥åˆ°ä¸¤æ¡å¤§å°å¸¦å®½é“¾è·¯ä¸Š, é‚£ä¹ˆå¾ˆæœ‰å¯èƒ½å¯¼è‡´ä¿è¯å…¬å¹³çš„çŠ¶æ€ä¸‹ä¸€æ¡å°é“¾è·¯çš„æµé‡å‘é€ç«¯ä¼šè¶…é¢å‘é€, å¯¼è‡´å¸¦å®½æµªè´¹</li>
<li>ç‰¹ç‚¹æ˜¯ <strong>Robust</strong> to:
<ul>
<li>Cheating</li>
<li>Variation in RTT</li>
<li>Details of delay/reordering/retransmission</li>
</ul>
</li>
</ul>
</li>
</ul>
<h4 id="è°ƒæ•´é€Ÿç‡-rate-adjustment-rate-control-protocol-rcp">è°ƒæ•´é€Ÿç‡ Rate Adjustment: Rate Control Protocol (RCP)</h4>
<ul>
<li>æ¯ä¸ªåŒ…éƒ½å¸¦æœ‰ä¸€ä¸ª rate field ä¿¡æ¯</li>
<li>è·¯ç”±å™¨å¯ä»¥æ ¹æ®å½“å‰ç½‘ç»œæƒ…å†µæ¥è®¡ç®— fair share å€¼å¹¶ä¸”æ’å…¥åˆ° packet header ä¸­,<br>
ä»è€Œè®© end-point æ¥è°ƒæ•´è‡ªå·±çš„å‘é€é€Ÿç‡åˆ° f</li>
</ul>
<h4 id="æ£€æµ‹æ‹¥å¡-congestion-detection">æ£€æµ‹æ‹¥å¡ Congestion Detection</h4>
<ul>
<li><strong>æ˜¾å¼æ‹¥å¡é€šçŸ¥(Explicit Congestion Notification, ECN)</strong>:
<ul>
<li>ä½œç”¨: ä½†å¦‚æœç«¯åˆ°ç«¯èƒ½æˆåŠŸåå•†ECNçš„è¯, æ”¯æŒECNçš„è·¯ç”±å™¨å°±å¯ä»¥å‘ç”Ÿæ‹¥å¡æ—¶åœ¨IPæŠ¥å¤´ä¸­è®¾ç½®ä¸€ä¸ªæ ‡è®°, å‘å‡ºå³å°†å‘ç”Ÿæ‹¥å¡çš„ä¿¡å·, è€Œä¸æ˜¯ç›´æ¥ä¸¢å¼ƒæ•°æ®åŒ…; ECNå‡å°‘äº†TCPçš„ä¸¢åŒ…æ•°é‡, é€šè¿‡é¿å…é‡ä¼ , å‡å°‘äº†å»¶è¿Ÿ(å°¤å…¶æ˜¯æŠ–åŠ¨), æå‡äº†åº”ç”¨çš„æ€§èƒ½</li>
<li>TCP SYN æ¡æ‰‹åŒ…ä¼šåŒ…å«ä¸¤ä¸ªé¢å¤–çš„flag: ECN-echo(ECE) å’Œ Congestion Window Reduced (CWR);<br>
è¿™æ ·åŒæ–¹å°±å¯ä»¥åå•†åœ¨æ•°æ®ä¼ è¾“æœŸé—´æ˜¯å¦å¯ä»¥æ­£ç¡®çš„å¤„ç†è®¾ç½®äº†CEä½çš„æ•°æ®åŒ…</li>
<li>æœºåˆ¶: è·¯ç”±å™¨é€šè¿‡ IP åŒ…å¤´æ ‡è®°æ‹¥å¡(å¦‚ ToS/DSCP ä½), æ¥æ”¶ç«¯é€šè¿‡ACKåé¦ˆ; ä¼˜ç‚¹: åŒºåˆ†æ‹¥å¡ä¸ä¸¢åŒ…, å‡å°‘å»¶è¿Ÿ, æ˜“äºéƒ¨ç½²(å¦‚æ•°æ®ä¸­å¿ƒåº”ç”¨);</li>
<li>ä¼˜ç‚¹
<ol>
<li>å¯ä»¥åŒºåˆ† corruption (åŒ…ç ´æŸ) å’Œ congestion (æ‹¥å¡) çš„æƒ…å†µ, é€šè¿‡ rate<br>
adjustment æ¥é¢„å…ˆè°ƒæ•´</li>
<li>Serve as early indicator to avoid delay</li>
<li>Easy to incrementally deploy (in ToS/DSCP field in IP header), common in<br>
data center applications</li>
</ol>
</li>
</ul>
</li>
</ul>
<hr>
<h2 id="routing-çš„æ ¸å¿ƒç›®æ ‡-routing-objectives">Routing çš„æ ¸å¿ƒç›®æ ‡(Routing Objectives)</h2>
<ul>
<li><strong>åŸºæœ¬ç›®æ ‡</strong>: æ‰¾åˆ°åˆ°è¾¾ç›®çš„åœ°çš„æœ‰æ•ˆè·¯å¾„(Find Path to Destination);</li>
<li><strong>æ‰©å±•ç›®æ ‡</strong>: å¯»æ‰¾æœ€å°æˆæœ¬è·¯å¾„(Least-Cost Path);</li>
<li><strong>è·¯ç”±çŠ¶æ€æœ‰æ•ˆæ€§(Valid Routing State)</strong>:
<ul>
<li>å…¨å±€è·¯ç”±çŠ¶æ€æœ‰æ•ˆå½“ä¸”ä»…å½“:
<ol>
<li>æ— æ­»é”(No Dead Ends): é™¤ç›®çš„åœ°å¤–, æ‰€æœ‰èŠ‚ç‚¹å‡æœ‰ä¸‹ä¸€è·³;</li>
<li>æ— ç¯è·¯(No Loops): æ•°æ®åŒ…ä¸ä¼šæ— é™å¾ªç¯;</li>
</ol>
</li>
</ul>
</li>
</ul>
<hr>
<h3 id="è·¯ç”±çŠ¶æ€åˆ†æ-routing-state-analysis">è·¯ç”±çŠ¶æ€åˆ†æ(Routing State Analysis)</h3>
<ul>
<li><strong>å±€éƒ¨çŠ¶æ€(Local State)</strong>: å•ä¸ªè·¯ç”±å™¨çš„è½¬å‘è¡¨(Forwarding Table), æ— æ³•ç‹¬ç«‹éªŒè¯æœ‰æ•ˆæ€§;</li>
<li><strong>å…¨å±€çŠ¶æ€(Global State)</strong>: å…¨ç½‘è·¯ç”±å™¨çš„è½¬å‘è¡¨é›†åˆ, å†³å®šæ•°æ®åŒ…è·¯å¾„;</li>
<li><strong>éªŒè¯æ–¹æ³•</strong>:
<ul>
<li><strong>æ„å»ºè·¯ç”±æ ‘(Spanning Tree)</strong>:
<ol>
<li>æ ‡è®°æŒ‡å‘ç›®çš„åœ°çš„ä¸‹ä¸€è·³(ç®­å¤´è¡¨ç¤º);</li>
<li>åˆ é™¤æœªä½¿ç”¨çš„é“¾è·¯;</li>
<li>è‹¥å‰©ä½™ç»“æ„ä¸ºè¿é€šæ ‘ä¸”æ— ç¯, åˆ™çŠ¶æ€æœ‰æ•ˆ;</li>
</ol>
</li>
<li><strong>ç¤ºä¾‹åˆ†æ</strong>:
<ul>
<li><strong>æœ‰æ•ˆçŠ¶æ€</strong>: å½¢æˆè¿é€šæ ‘(å¦‚ç¤ºä¾‹1);</li>
<li><strong>æ— æ•ˆçŠ¶æ€</strong>: å­˜åœ¨ç¯è·¯æˆ–å­¤ç«‹èŠ‚ç‚¹(å¦‚ç¤ºä¾‹2);</li>
</ul>
</li>
</ul>
</li>
</ul>
<hr>
<h3 id="æœ€å°æˆæœ¬è·¯å¾„è·¯ç”±-least-cost-path-routing">æœ€å°æˆæœ¬è·¯å¾„è·¯ç”±(Least-Cost Path Routing)</h3>
<ul>
<li>
<p><strong>ç›®æ ‡</strong>: åŸºäºé“¾è·¯æˆæœ¬(å¦‚å»¶è¿Ÿ, è´Ÿè½½)è®¡ç®—æºåˆ°ç›®çš„åœ°çš„æœ€ä¼˜è·¯å¾„;</p>
</li>
<li>
<p><strong>æ ¸å¿ƒç®—æ³•</strong>: <strong>Dijkstraç®—æ³•</strong></p>
<ul>
<li><strong>è¾“å…¥</strong>: ç½‘ç»œæ‹“æ‰‘å›¾, é“¾è·¯æˆæœ¬;</li>
<li><strong>æ­¥éª¤</strong>:
<ol>
<li><strong>åˆå§‹åŒ–</strong>:
<ul>
<li>é›†åˆ <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msup><mi>N</mi><mo mathvariant="normal" lspace="0em" rspace="0em">â€²</mo></msup><mo>=</mo><mo stretchy="false">{</mo><mtext>æºèŠ‚ç‚¹</mtext><mo stretchy="false">}</mo></mrow><annotation encoding="application/x-tex">N&#x27; = \{æºèŠ‚ç‚¹\}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.751892em;vertical-align:0em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.10903em;">N</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.751892em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">â€²</span></span></span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mopen">{</span><span class="mord cjk_fallback">æº</span><span class="mord cjk_fallback">èŠ‚</span><span class="mord cjk_fallback">ç‚¹</span><span class="mclose">}</span></span></span></span>, <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>D</mi><mo stretchy="false">(</mo><mtext>æº</mtext><mo stretchy="false">)</mo><mo>=</mo><mn>0</mn></mrow><annotation encoding="application/x-tex">D(æº) = 0</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathdefault" style="margin-right:0.02778em;">D</span><span class="mopen">(</span><span class="mord cjk_fallback">æº</span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.64444em;vertical-align:0em;"></span><span class="mord">0</span></span></span></span>;</li>
<li>å…¶ä»–èŠ‚ç‚¹åˆå§‹è·ç¦»ä¸º <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi mathvariant="normal">âˆ</mi></mrow><annotation encoding="application/x-tex">\infty</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.43056em;vertical-align:0em;"></span><span class="mord">âˆ</span></span></span></span>, ç›´è¿èŠ‚ç‚¹è·ç¦»ä¸ºé“¾è·¯æˆæœ¬;</li>
</ul>
</li>
<li><strong>è¿­ä»£æ›´æ–°</strong>:
<ul>
<li>é€‰æ‹©æœªåŠ å…¥é›†åˆ <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msup><mi>N</mi><mo mathvariant="normal" lspace="0em" rspace="0em">â€²</mo></msup></mrow><annotation encoding="application/x-tex">N&#x27;</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.751892em;vertical-align:0em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.10903em;">N</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.751892em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">â€²</span></span></span></span></span></span></span></span></span></span></span></span> çš„æœ€å°è·ç¦»èŠ‚ç‚¹ <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>w</mi></mrow><annotation encoding="application/x-tex">w</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.43056em;vertical-align:0em;"></span><span class="mord mathdefault" style="margin-right:0.02691em;">w</span></span></span></span>;</li>
<li>æ›´æ–°ç›¸é‚»èŠ‚ç‚¹ <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>v</mi></mrow><annotation encoding="application/x-tex">v</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.43056em;vertical-align:0em;"></span><span class="mord mathdefault" style="margin-right:0.03588em;">v</span></span></span></span> çš„è·ç¦»: <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>D</mi><mo stretchy="false">(</mo><mi>v</mi><mo stretchy="false">)</mo><mo>=</mo><mi>min</mi><mo>â¡</mo><mo stretchy="false">(</mo><mi>D</mi><mo stretchy="false">(</mo><mi>v</mi><mo stretchy="false">)</mo><mo separator="true">,</mo><mi>D</mi><mo stretchy="false">(</mo><mi>w</mi><mo stretchy="false">)</mo><mo>+</mo><mi>c</mi><mo stretchy="false">(</mo><mi>w</mi><mo separator="true">,</mo><mi>v</mi><mo stretchy="false">)</mo><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">D(v) = \min(D(v), D(w) + c(w,v))</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathdefault" style="margin-right:0.02778em;">D</span><span class="mopen">(</span><span class="mord mathdefault" style="margin-right:0.03588em;">v</span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mop">min</span><span class="mopen">(</span><span class="mord mathdefault" style="margin-right:0.02778em;">D</span><span class="mopen">(</span><span class="mord mathdefault" style="margin-right:0.03588em;">v</span><span class="mclose">)</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord mathdefault" style="margin-right:0.02778em;">D</span><span class="mopen">(</span><span class="mord mathdefault" style="margin-right:0.02691em;">w</span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathdefault">c</span><span class="mopen">(</span><span class="mord mathdefault" style="margin-right:0.02691em;">w</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord mathdefault" style="margin-right:0.03588em;">v</span><span class="mclose">)</span><span class="mclose">)</span></span></span></span>;</li>
<li>é‡å¤ç›´åˆ°æ‰€æœ‰èŠ‚ç‚¹åŠ å…¥ <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msup><mi>N</mi><mo mathvariant="normal" lspace="0em" rspace="0em">â€²</mo></msup></mrow><annotation encoding="application/x-tex">N&#x27;</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.751892em;vertical-align:0em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.10903em;">N</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.751892em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">â€²</span></span></span></span></span></span></span></span></span></span></span></span>;</li>
</ul>
</li>
</ol>
</li>
<li><strong>è¾“å‡º</strong>: æœ€çŸ­è·¯å¾„æ ‘(Shortest Path Tree)åŠè½¬å‘è¡¨;</li>
</ul>
</li>
<li>
<p><strong>ç¤ºä¾‹</strong>:</p>
<table>
<thead>
<tr>
<th>èŠ‚ç‚¹</th>
<th>è·¯å¾„æˆæœ¬</th>
<th>å‰é©±èŠ‚ç‚¹</th>
</tr>
</thead>
<tbody>
<tr>
<td>V</td>
<td>7</td>
<td>u</td>
</tr>
<tr>
<td>W</td>
<td>3</td>
<td>u</td>
</tr>
<tr>
<td>Z</td>
<td>é€šè¿‡ W æ›´æ–°</td>
<td>W</td>
</tr>
</tbody>
</table>
</li>
</ul>
<hr>
<h3 id="dijkstraç®—æ³•å®è·µ-dijkstra-in-practice">Dijkstraç®—æ³•å®è·µ(Dijkstra in Practice)</h3>
<ul>
<li>
<p><strong>è½¬è¡¨ç¤ºä¾‹</strong>:</p>
<table>
<thead>
<tr>
<th>ç›®çš„åœ°</th>
<th>ä¸‹ä¸€è·³</th>
</tr>
</thead>
<tbody>
<tr>
<td>V</td>
<td>(u, w)</td>
</tr>
<tr>
<td>W</td>
<td>(u, w)</td>
</tr>
<tr>
<td>Z</td>
<td>(u, w)</td>
</tr>
</tbody>
</table>
</li>
<li>
<p><strong>å…³é”®ç‰¹æ€§</strong>:</p>
<ul>
<li>é¿å…ç¯è·¯(è·¯å¾„æˆæœ¬å•è°ƒé€’å¢);</li>
<li>æ—¶é—´å¤æ‚åº¦: <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>O</mi><mo stretchy="false">(</mo><msup><mi>n</mi><mn>2</mn></msup><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">O(n^2)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1.064108em;vertical-align:-0.25em;"></span><span class="mord mathdefault" style="margin-right:0.02778em;">O</span><span class="mopen">(</span><span class="mord"><span class="mord mathdefault">n</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8141079999999999em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span></span></span></span></span><span class="mclose">)</span></span></span></span>, é€‚ç”¨äºä¸­å°è§„æ¨¡ç½‘ç»œ;</li>
</ul>
</li>
</ul>
<h3 id="é“¾è·¯çŠ¶æ€è·¯ç”±-link-state-routing">é“¾è·¯çŠ¶æ€è·¯ç”± (Link-State Routing)</h3>
<ul>
<li>
<p><strong>æ ¸å¿ƒç®—æ³•</strong></p>
<ul>
<li>Dijkstraç®—æ³•(æœ€çŸ­è·¯å¾„ä¼˜å…ˆ, SPF)
<ul>
<li>å·²çŸ¥å…¨ç½‘æ‹“æ‰‘å’Œé“¾è·¯æˆæœ¬, è®¡ç®—ä»æºåˆ°æ‰€æœ‰ç›®çš„åœ°çš„æœ€çŸ­è·¯å¾„</li>
<li>æ¯æ¬¡è¿­ä»£ç¡®å®škä¸ªç›®çš„åœ°çš„æœ€çŸ­è·¯å¾„</li>
</ul>
</li>
<li>æ¯ä¸ªè·¯ç”±å™¨ç‹¬ç«‹è¿è¡Œ Dijkstra ç®—æ³•</li>
</ul>
</li>
<li>
<p><strong>é“¾è·¯çŠ¶æ€æ³›æ´ª (Flooding)</strong></p>
<ul>
<li>è·¯ç”±å™¨å°†æœ¬åœ°é“¾è·¯çŠ¶æ€ä¿¡æ¯å¹¿æ’­è‡³å…¨ç½‘
<ul>
<li>every router learns the entire network topology</li>
</ul>
</li>
<li>è½¬å‘è§„åˆ™: æ”¶åˆ°ä¿¡æ¯çš„èŠ‚ç‚¹å‘æ‰€æœ‰æ¥å£è½¬å‘(é™¤æ¥æºæ¥å£)</li>
<li>è§¦å‘æ¡ä»¶:
<ul>
<li>Topology change (link/node failure/recovery)</li>
<li>Configuration change (link cost change)</li>
<li>periodic updates (å®šæ—¶å‘é€, å¦‚æ¯30ç§’)</li>
</ul>
</li>
</ul>
</li>
<li>
<p><strong>æ”¶æ•›ä¸æ€§èƒ½ (Convergence)</strong></p>
<ul>
<li>
<p>æ”¶æ•›(convergence): å…¨ç½‘è·¯ç”±å™¨è¾¾åˆ°ä¸€è‡´ (consistent) çš„è·¯ç”±è¡¨çŠ¶æ€</p>
<ul>
<li>è§¦å‘æ¡ä»¶: é“¾è·¯çŠ¶æ€æ³›æ´ªå®Œæˆ, æ‰€æœ‰è·¯ç”±å™¨è¿è¡ŒDijkstraç®—æ³•</li>
<li>æ”¶æ•›æ—¶é—´: ä»é“¾è·¯çŠ¶æ€å˜åŒ–åˆ°å…¨ç½‘ä¸€è‡´çš„æ—¶é—´</li>
</ul>
</li>
<li>
<p>æ”¶æ•›å»¶è¿Ÿæ¥æº: æ•…éšœæ£€æµ‹æ—¶é—´, æ³›æ´ªæ—¶é—´, è·¯ç”±è¡¨é‡è®¡ç®—æ—¶é—´</p>
</li>
<li>
<p>æ”¶æ•›æœŸé—´çš„é—®é¢˜: è·¯ç”±ç¯è·¯, é»‘æ´ä¸¢åŒ…, æ•°æ®åŒ…ä¹±åº</p>
</li>
<li>
<p>æ”¶æ•›åç‰¹æ€§: å…¨ç½‘ä¸€è‡´çš„è·¯ç”±è¡¨, é¿å…ç¯è·¯</p>
</li>
</ul>
</li>
<li>
<p><strong>åè®®å®ç°</strong></p>
<ul>
<li>OSPF(å¼€æ”¾æœ€çŸ­è·¯å¾„ä¼˜å…ˆ, Open Shortest Path First)
<ul>
<li>Open: Publicly Available;</li>
<li>ç›´æ¥åŸºäºIPä¼ è¾“, ä½¿ç”¨å¯é ä¼ è¾“æœºåˆ¶ (ä¸æ˜¯ udp/tcp)</li>
<li>Flood é“¾è·¯çŠ¶æ€é€šå‘Š(LSA, link state advertisement) è‡³è‡ªæ²»ç³»ç»Ÿ (AS) å†…<strong>æ‰€æœ‰è·¯ç”±å™¨</strong></li>
</ul>
</li>
<li>IS-IS(ä¸­é—´ç³»ç»Ÿåˆ°ä¸­é—´ç³»ç»Ÿ)
<ul>
<li>ä¸OSPFç±»ä¼¼, ä¸»è¦ç”¨äºISPç½‘ç»œ</li>
</ul>
</li>
</ul>
</li>
<li>
<p><strong>Scalability</strong></p>
<ul>
<li>æ¶ˆæ¯å¤æ‚åº¦: O(NE)(Nä¸ºèŠ‚ç‚¹æ•°, Eä¸ºé“¾è·¯æ•°)</li>
<li>è®¡ç®—å¤æ‚åº¦: <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>O</mi><mo stretchy="false">(</mo><msup><mi>N</mi><mn>2</mn></msup><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">O(N^2)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1.064108em;vertical-align:-0.25em;"></span><span class="mord mathdefault" style="margin-right:0.02778em;">O</span><span class="mopen">(</span><span class="mord"><span class="mord mathdefault" style="margin-right:0.10903em;">N</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8141079999999999em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span></span></span></span></span><span class="mclose">)</span></span></span></span></li>
<li>Convergence Delay: O(Network Diameter)
<ul>
<li>ç½‘ç»œç›´å¾„: ç½‘ç»œä¸­ä»»æ„ä¸¤èŠ‚ç‚¹ä¹‹é—´çš„æœ€é•¿æœ€çŸ­è·¯å¾„</li>
</ul>
</li>
<li>Entries: O(N)</li>
</ul>
</li>
</ul>
<hr>
<h3 id="è·ç¦»å‘é‡è·¯ç”±-distance-vector-routing">è·ç¦»å‘é‡è·¯ç”± (Distance-Vector Routing)</h3>
<ul>
<li>
<p><strong>æ ¸å¿ƒç®—æ³•</strong></p>
<ul>
<li>Bellman-Fordæ–¹ç¨‹
<ul>
<li><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>d</mi><mi>x</mi></msub><mo stretchy="false">(</mo><mi>y</mi><mo stretchy="false">)</mo><mo>=</mo><msub><mo><mi>min</mi><mo>â¡</mo></mo><mi>v</mi></msub><mo stretchy="false">{</mo><mi>c</mi><mo stretchy="false">(</mo><mi>x</mi><mo separator="true">,</mo><mi>v</mi><mo stretchy="false">)</mo><mo>+</mo><msub><mi>d</mi><mi>v</mi></msub><mo stretchy="false">(</mo><mi>y</mi><mo stretchy="false">)</mo><mo stretchy="false">}</mo></mrow><annotation encoding="application/x-tex">d_x(y) = \min_v \{ c(x, v) + d_v(y) \}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord"><span class="mord mathdefault">d</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.151392em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight">x</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mopen">(</span><span class="mord mathdefault" style="margin-right:0.03588em;">y</span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mop"><span class="mop">min</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.151392em;"><span style="top:-2.5500000000000003em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight" style="margin-right:0.03588em;">v</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mopen">{</span><span class="mord mathdefault">c</span><span class="mopen">(</span><span class="mord mathdefault">x</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord mathdefault" style="margin-right:0.03588em;">v</span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord"><span class="mord mathdefault">d</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.151392em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight" style="margin-right:0.03588em;">v</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mopen">(</span><span class="mord mathdefault" style="margin-right:0.03588em;">y</span><span class="mclose">)</span><span class="mclose">}</span></span></span></span></li>
<li>é€šè¿‡é‚»å±…èŠ‚ç‚¹çš„è·ç¦»å‘é‡è¿­ä»£æ›´æ–°è‡ªèº«è·¯ç”±è¡¨</li>
<li>æ¯ä¸ªèŠ‚ç‚¹å‘ŠçŸ¥é‚»å±…å…¶è‡ªèº«çš„ Global View</li>
</ul>
</li>
<li>åˆ†å¸ƒå¼, å¼‚æ­¥æ›´æ–°: èŠ‚ç‚¹ä»…ä¸é‚»å±…äº¤æ¢è·ç¦»å‘é‡(DV)</li>
</ul>
</li>
<li>
<p><strong>ç®—æ³•æµç¨‹</strong></p>
<ul>
<li>èŠ‚ç‚¹ç»´æŠ¤è‡ªèº«è·ç¦»å‘é‡ <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>D</mi><mi>x</mi></msub><mo stretchy="false">(</mo><mi>y</mi><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">D_x(y)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.02778em;">D</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.151392em;"><span style="top:-2.5500000000000003em;margin-left:-0.02778em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight">x</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mopen">(</span><span class="mord mathdefault" style="margin-right:0.03588em;">y</span><span class="mclose">)</span></span></span></span> å’Œé‚»å±…çš„DV</li>
<li>è§¦å‘æ›´æ–°æ¡ä»¶: é“¾è·¯æˆæœ¬å˜åŒ–æˆ–æ”¶åˆ°é‚»å±…çš„æ–°DV</li>
<li>æ›´æ–°è§„åˆ™: æ ¹æ®Bellman-Fordæ–¹ç¨‹é‡æ–°è®¡ç®—å¹¶å¹¿æ’­å˜åŒ–</li>
</ul>
</li>
<li>
<p><strong>Count-to-Infinity</strong></p>
<ul>
<li>è·ç¦»å‘é‡è·¯ç”±çš„ä¸€ä¸ªé—®é¢˜, å½“é“¾è·¯å¤±æ•ˆæ—¶, èŠ‚ç‚¹å¯èƒ½ä¼šé”™è¯¯åœ°è®¤ä¸ºè·¯å¾„ä»ç„¶å­˜åœ¨, å¯¼è‡´æ— é™å¾ªç¯æ›´æ–°</li>
<li>è§£å†³æ–¹æ¡ˆ:
<ul>
<li>Poison Reverse (æ¯’æ€§åè½¬) å‘é‚»å±…é€šå‘Šåˆ°è¾¾è¯¥ç›®çš„åœ°çš„è·ç¦»ä¸º <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi mathvariant="normal">âˆ</mi></mrow><annotation encoding="application/x-tex">\infty</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.43056em;vertical-align:0em;"></span><span class="mord">âˆ</span></span></span></span></li>
<li>Loop-Free Path: ä½¿ç”¨ path vector, æˆ–è€…ä½¿ç”¨ src tracking</li>
</ul>
</li>
</ul>
</li>
<li>
<p><strong>Scalability</strong></p>
<ul>
<li>æ¶ˆæ¯å¤æ‚åº¦å°äº ls ç®—æ³•</li>
<li>è®¡ç®—å¤æ‚åº¦: O(N), æ¯æ¬¡æ”¶åˆ°ä¸€ä¸ªè¡¨å¯¹åº”æ›´æ–°</li>
<li>Convergence Delay: O(Network Diameter)
<ul>
<li>ç½‘ç»œç›´å¾„: ç½‘ç»œä¸­ä»»æ„ä¸¤èŠ‚ç‚¹ä¹‹é—´çš„æœ€é•¿æœ€çŸ­è·¯å¾„</li>
</ul>
</li>
<li>Entries: O(N)</li>
</ul>
</li>
</ul>
<h3 id="è·¯ç”±åè®®å¯¹æ¯”">è·¯ç”±åè®®å¯¹æ¯”</h3>
<table>
<thead>
<tr>
<th>ç‰¹æ€§</th>
<th>é“¾è·¯çŠ¶æ€è·¯ç”± (Link-State)</th>
<th>è·ç¦»å‘é‡è·¯ç”± (Distance-Vector)</th>
</tr>
</thead>
<tbody>
<tr>
<td>ï½œ Message Complexity</td>
<td>O(NE)</td>
<td>O(N)</td>
</tr>
<tr>
<td>Convergence Delay</td>
<td>faster</td>
<td>varies, may have count-to-infinity problem</td>
</tr>
<tr>
<td>robustness</td>
<td>node can advertise wrong link cost, and node calc its own table</td>
<td>node can advertise wrong path cost, and nodesâ€™ table error will propagate</td>
</tr>
</tbody>
</table>
<hr>
<h2 id="è‡ªæ²»ç³»ç»Ÿ-autonomous-system-as">è‡ªæ²»ç³»ç»Ÿ(Autonomous System, AS)</h2>
<h3 id="åŸºæœ¬æ¦‚å¿µ">åŸºæœ¬æ¦‚å¿µ</h3>
<ul>
<li><strong>å®šä¹‰</strong>: ç”±å•ä¸€ç®¡ç†å®ä½“æ§åˆ¶çš„ç½‘ç»œåŒºåŸŸ(å¦‚ISP, å¤§å‹ä¼ä¸šç½‘ç»œ)</li>
<li><strong>ASç¼–å·(ASN)</strong>: å…¨çƒå”¯ä¸€æ ‡è¯†ç¬¦(å¦‚å¯†æ­‡æ ¹å¤§å­¦æ‹¥æœ‰ASN 177-180)</li>
<li><strong>æ•°é‡ç»Ÿè®¡</strong>:
<ul>
<li>IPv4 ASçº¦77,000ä¸ª, IPv6 ASçº¦34,750ä¸ª(æˆªè‡³2025å¹´)</li>
<li>æµé‡é›†ä¸­è¶‹åŠ¿: 2019å¹´, å‰5å¤§&quot;è¶…å¤§å‹AS&quot;(å¦‚Google, Netflix)è´¡çŒ®åŠæ•°äº’è”ç½‘æµé‡</li>
</ul>
</li>
</ul>
<hr>
<h3 id="åŸŸå†…ä¸åŸŸé—´è·¯ç”±å¯¹æ¯”">åŸŸå†…ä¸åŸŸé—´è·¯ç”±å¯¹æ¯”</h3>
<table>
<thead>
<tr>
<th><strong>ç‰¹æ€§</strong></th>
<th><strong>åŸŸå†…è·¯ç”±(Intra-domain)</strong></th>
<th><strong>åŸŸé—´è·¯ç”±(Inter-domain)</strong></th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>åè®®</strong></td>
<td>OSPF(é“¾è·¯çŠ¶æ€), RIP(è·ç¦»å‘é‡), ç»Ÿç§°ä¸º IGP</td>
<td>BGP(è·¯å¾„å‘é‡, ç­–ç•¥é©±åŠ¨)</td>
</tr>
<tr>
<td><strong>ç›®æ ‡</strong></td>
<td>æœ€çŸ­è·¯å¾„, å¿«é€Ÿæ”¶æ•›</td>
<td>ç­–ç•¥ä¼˜å…ˆ(å•†ä¸šå…³ç³», éšç§)</td>
</tr>
<tr>
<td><strong>æŒ‘æˆ˜</strong></td>
<td>å¿«é€Ÿè®¡ç®—è·¯å¾„, é¿å…ç¯è·¯</td>
<td>Scalability, Autonomous, Privacy</td>
</tr>
</tbody>
</table>
<hr>
<h3 id="åŸŸé—´è·¯ç”±çš„æŒ‘æˆ˜">åŸŸé—´è·¯ç”±çš„æŒ‘æˆ˜</h3>
<h3 id="1-æ‰©å±•æ€§-scaling">1. æ‰©å±•æ€§(Scaling)</h3>
<ul>
<li><strong>åŠŸèƒ½è¦æ±‚</strong>: æ¯ä¸ªè·¯ç”±å™¨éƒ½åº”è¯¥èƒ½è®¿é—®åˆ°å…¨ç½‘çš„è·¯ç”±ä¿¡æ¯
<ul>
<li><strong>Naive</strong>: æ¯ä¸ªè·¯ç”±å™¨ç»´æŠ¤å…¨ç½‘è·¯ç”±è¡¨, ä½†éšç€ASæ•°é‡å¢åŠ , è·¯ç”±è¡¨å°†çˆ†ç‚¸</li>
<li><strong>Better</strong>: å°†å¤šä¸ªåœ°å€ç›¸è¿‘çš„ç½‘å€åˆå¹¶æˆä¸€ä¸ªè·¯ç”±è¡¨ entry ä»è€Œå‡å°è·¯ç”±è¡¨å¤§å°</li>
<li><strong>Host addressing is the key to scalability</strong>: é€šè¿‡<strong>å±‚æ¬¡åŒ–åœ°å€</strong>åˆ†é…æ¥å‡å°‘è·¯ç”±è¡¨æ¡ç›®</li>
</ul>
</li>
</ul>
<h3 id="2-ç®¡ç†è‡ªæ²»ä¸éšç§">2. ç®¡ç†è‡ªæ²»ä¸éšç§</h3>
<p>è‡ªæ²»ç³»ç»Ÿåº”å…·æœ‰ä¸€å®šçš„è‡ªæˆ‘ç®¡ç†å±æ€§, åŒ…æ‹¬:</p>
<ul>
<li>Freedom in picking routes
<ul>
<li>å¯ä»¥é€‰æ‹©ç»è¿‡/ä¸ç»è¿‡å“ªäº›è·¯å¾„</li>
</ul>
</li>
<li>Autonomy
<ul>
<li>å¯¹äºå†…éƒ¨é‡‡å– dv/ls è·¯ç”±åè®®å¯ä»¥ç”±è‡ªå·± as æ¥å†³å®š</li>
<li>å¯ä»¥é€‰å–è‡ªå·±çš„ policy</li>
</ul>
</li>
<li>Privacy
<ul>
<li>å¯ä»¥é€‰å–è‡ªå·±çš„ç½‘ç»œæ‹“æ‰‘, routing policy</li>
</ul>
</li>
</ul>
<hr>
<h2 id="ipåœ°å€åˆ†é…ä¸cidr">IPåœ°å€åˆ†é…ä¸CIDR</h2>
<h3 id="1-ipv4åœ°å€ç»“æ„">1. IPv4åœ°å€ç»“æ„</h3>
<ul>
<li><strong>32ä½åœ°å€</strong>: åˆ†ç½‘ç»œå‰ç¼€(Network Prefix)å’Œä¸»æœºåç¼€(Host Suffix)
<ul>
<li>ç¤ºä¾‹: <code>12.34.158.5/23</code> â†’ ç½‘ç»œéƒ¨åˆ†(å‰23ä½), ä¸»æœºéƒ¨åˆ†(å9ä½)</li>
</ul>
</li>
<li><strong>Inter-domain Routing</strong>: ä¾é äº network prefix æ¥è¿›è¡Œè·¯ç”±</li>
<li><strong>CIDR (Classless Inter-Domain Routing æ— ç±»åŸŸé—´è·¯ç”±)</strong>:
<ul>
<li>çµæ´»åˆ’åˆ†ç½‘ç»œä¸ä¸»æœºè¾¹ç•Œ(å¦‚<code>12.34.158.0/26</code>, å­ç½‘ subnet mask æ©ç <code>255.255.255.192</code>)</li>
</ul>
</li>
<li><strong>Classful Addressing</strong>: ä¼ ç»Ÿçš„ç±»åˆ’åˆ†(å¦‚A/B/Cç±»)å·²ä¸å†é€‚ç”¨, CIDRå–è€Œä»£ä¹‹
<ul>
<li>ç¤ºä¾‹: <code>Aç±»(0-127)</code> â†’ <code>/8</code>, <code>Bç±»(128-191)</code> â†’ <code>/16</code>, <code>Cç±»(192-223)</code> â†’ <code>/24</code></li>
<li>ä¼šå¯¼è‡´åœ°å€æµªè´¹, ä¾‹å¦‚ä¸»æœºæ•°é‡ä»‹äº 8 - 16 bit ä¹‹é—´å°±å¿…é¡»è¦ç”¨ <code>/16</code> çš„åœ°å€, è¿™æ ·å°±ä¼šæµªè´¹æ‰ 2^8 - 2^16 ä¸ªåœ°å€</li>
</ul>
</li>
</ul>
<h3 id="2-åœ°å€åˆ†é…å±‚æ¬¡-hierarchical">2. åœ°å€åˆ†é…å±‚æ¬¡ Hierarchical</h3>
<ul>
<li><strong>èšåˆæ¡ä»¶</strong>: åœ°å€åˆ†é…éœ€ match ç½‘ç»œæ‹“æ‰‘, å¦åˆ™è·¯ç”±è¡¨æ— æ³•æœ‰æ•ˆèšåˆ</li>
<li><strong>åŠ å…¥æ–°çš„èŠ‚ç‚¹</strong>: æ–°èŠ‚ç‚¹çš„åŠ å…¥åªéœ€è¦æ›´æ–°ä¸å…¶ç›´æ¥ç›¸è¿çš„è·¯ç”±å™¨çš„è·¯ç”±è¡¨, è€Œä¸éœ€è¦æ›´æ–°æ•´ä¸ªç½‘ç»œçš„è·¯ç”±è¡¨</li>
<li><strong>Multi-homed é—®é¢˜</strong>: å½“ä¸€ä¸ªç½‘ç»œè¿æ¥åˆ°å¤šäºä¸€ä¸ª AS çš„æ—¶å€™ (å¾€å¾€æ˜¯ä¸ºäº† fault-tolerance æˆ–è€… load balancing), IP åœ°å€çš„åŒç±»åœ°å€èšåˆå¯èƒ½ä¼šå¤±æ•ˆ
<ul>
<li>è·¯ç”±è¡¨è†¨èƒ€: å¤šå®¿ä¸»ç»„ç»‡å› æ‹¥æœ‰æ¥è‡ªä¸åŒISPçš„å¤šä¸ªå‰ç¼€, è¿™äº›å‰ç¼€æ— æ³•åœ¨å…¨å±€èŒƒå›´å†…èšåˆ, ä»è€Œå¯¼è‡´å…¨çƒè·¯ç”±è¡¨ä¸­çš„æ¡ç›®å¢åŠ ;</li>
</ul>
</li>
</ul>
<hr>
<h2 id="è¾¹ç•Œç½‘å…³åè®®-bgp-border-gateway-protocol">è¾¹ç•Œç½‘å…³åè®®(BGP, Border Gateway Protocol)</h2>
<h3 id="1-æ ¸å¿ƒç‰¹æ€§">1. æ ¸å¿ƒç‰¹æ€§</h3>
<ul>
<li><strong>ç­–ç•¥é©±åŠ¨</strong>: ASåŸºäºå•†ä¸šå…³ç³»é€‰æ‹©è·¯å¾„, è€Œéå•çº¯æœ€çŸ­è·¯å¾„</li>
<li><strong>è·¯å¾„å‘é‡åè®®</strong>: å¹¿æ’­å®Œæ•´ASè·¯å¾„(å¦‚<code>AS1 â†’ AS3 â†’ AS5</code>), é¿å…ç¯è·¯</li>
</ul>
<h3 id="2-asé—´å•†ä¸šå…³ç³»">2. ASé—´å•†ä¸šå…³ç³»</h3>
<table>
<thead>
<tr>
<th><strong>å…³ç³»ç±»å‹</strong></th>
<th><strong>ç»æµæ¨¡å‹</strong></th>
<th><strong>è·¯ç”±ç­–ç•¥</strong></th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>å®¢æˆ·-æä¾›å•†</strong></td>
<td>å®¢æˆ·å‘æä¾›å•†ä»˜è´¹</td>
<td>æä¾›å•†ä¸ºå®¢æˆ·æµé‡æä¾›ä¸­è½¬(Transit)</td>
</tr>
<tr>
<td><strong>å¯¹ç­‰äº’è”(Peering)</strong></td>
<td>äº’ä¸ä»˜è´¹, æµé‡å¯¹ç­‰äº¤æ¢</td>
<td>ä»…äº¤æ¢ç›´æ¥æµé‡, ä¸ä¸­è½¬ç¬¬ä¸‰æ–¹æµé‡</td>
</tr>
</tbody>
</table>
<h3 id="3-è·¯ç”±é€‰æ‹©åŸåˆ™">3. è·¯ç”±é€‰æ‹©åŸåˆ™</h3>
<ul>
<li><strong>Valley-FreeåŸåˆ™</strong>: è·¯å¾„éœ€é¿å…&quot;ç»æµä½è°·&quot;(å¦‚<code>å®¢æˆ· â†’ æä¾›å•† â†’ å¯¹ç­‰ â†’ å®¢æˆ·</code>æ— æ•ˆ)</li>
<li><strong>è·¯ç”±ç­–ç•¥ç¤ºä¾‹</strong>:
<ul>
<li>ä¼˜å…ˆé€šè¿‡å®¢æˆ·é“¾è·¯(äº§ç”Ÿæ”¶å…¥)</li>
<li>é¿å…é€šè¿‡ç«äº‰å¯¹æ‰‹ç½‘ç»œä¸­è½¬æµé‡</li>
</ul>
</li>
</ul>
<hr>
</article><div class="post-copyright"><div class="post-copyright__author"><span class="post-copyright-meta"><i class="fas fa-circle-user fa-fw"></i>Author: </span><span class="post-copyright-info"><a href="http://example.com">Yuchen You (Wesley)</a></span></div><div class="post-copyright__type"><span class="post-copyright-meta"><i class="fas fa-square-arrow-up-right fa-fw"></i>Link: </span><span class="post-copyright-info"><a href="http://example.com/2025/03/11/wesley_knowledge_repo/network/3.%20%E7%BD%91%E7%BB%9C%E5%B1%82/">http://example.com/2025/03/11/wesley_knowledge_repo/network/3.%20%E7%BD%91%E7%BB%9C%E5%B1%82/</a></span></div><div class="post-copyright__notice"><span class="post-copyright-meta"><i class="fas fa-circle-exclamation fa-fw"></i>Copyright Notice: </span><span class="post-copyright-info">All articles in this blog are licensed under <a target="_blank" rel="noopener" href="https://creativecommons.org/licenses/by-nc-sa/4.0/">CC BY-NC-SA 4.0</a> unless stating additionally.</span></div></div><div class="tag_share"><div class="post-meta__tag-list"><a class="post-meta__tags" href="/tags/cyber-security/">cyber_security</a></div><div class="post_share"><div class="social-share" data-image="/img/me_new.jpeg" data-sites="facebook,twitter,wechat,weibo,qq"></div><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/butterfly-extsrc@1.1.3/sharejs/dist/css/share.min.css" media="print" onload="this.media='all'"><script src="https://cdn.jsdelivr.net/npm/butterfly-extsrc@1.1.3/sharejs/dist/js/social-share.min.js" defer></script></div></div><nav class="pagination-post" id="pagination"><div class="prev-post pull-left"><a href="/2025/03/11/wesley_knowledge_repo/network/security/5.%20%E5%AF%86%E7%A0%81%E6%94%BB%E5%87%BB%20Password%20Attack/" title="5. å¯†ç æ”»å‡» Password Attack"><div class="cover" style="background: var(--default-bg-color)"></div><div class="pagination-info"><div class="label">Previous</div><div class="prev_info">5. å¯†ç æ”»å‡» Password Attack</div></div></a></div><div class="next-post pull-right"><a href="/2025/03/07/wesley_knowledge_repo/network/security/John-the-Ripper/" title="John the Ripper"><div class="cover" style="background: var(--default-bg-color)"></div><div class="pagination-info"><div class="label">Next</div><div class="next_info">John the Ripper</div></div></a></div></nav><div class="relatedPosts"><div class="headline"><i class="fas fa-thumbs-up fa-fw"></i><span>Related Articles</span></div><div class="relatedPosts-list"><div><a href="/2025/01/13/wesley_knowledge_repo/network/security/1.%20%E5%AF%86%E7%A0%81%E5%AD%A6%E5%9F%BA%E7%A1%80/" title="1. å¯†ç å­¦åŸºç¡€"><div class="cover" style="background: var(--default-bg-color)"></div><div class="content is-center"><div class="date"><i class="far fa-calendar-alt fa-fw"></i> 2025-01-13</div><div class="title">1. å¯†ç å­¦åŸºç¡€</div></div></a></div><div><a href="/2025/02/13/wesley_knowledge_repo/network/security/2.%20Web%20%E6%94%BB%E5%87%BB%E4%B8%8E%E9%98%B2%E5%BE%A1/" title="2. Web æ”»å‡»ä¸é˜²å¾¡"><div class="cover" style="background: var(--default-bg-color)"></div><div class="content is-center"><div class="date"><i class="far fa-calendar-alt fa-fw"></i> 2025-02-13</div><div class="title">2. Web æ”»å‡»ä¸é˜²å¾¡</div></div></a></div><div><a href="/2025/02/18/wesley_knowledge_repo/network/security/4.%20Network%20%E5%9F%BA%E7%A1%80%20(%E8%AF%A6%E8%A7%81489)/" title="4. Network åŸºç¡€"><div class="cover" style="background: var(--default-bg-color)"></div><div class="content is-center"><div class="date"><i class="far fa-calendar-alt fa-fw"></i> 2025-02-19</div><div class="title">4. Network åŸºç¡€</div></div></a></div><div><a href="/2025/02/13/wesley_knowledge_repo/network/security/3.%20HTTP%20%E6%94%BB%E5%87%BB%E9%98%B2%E5%BE%A1/" title="3. HTTP æ”»å‡»é˜²å¾¡"><div class="cover" style="background: var(--default-bg-color)"></div><div class="content is-center"><div class="date"><i class="far fa-calendar-alt fa-fw"></i> 2025-02-13</div><div class="title">3. HTTP æ”»å‡»é˜²å¾¡</div></div></a></div><div><a href="/2025/03/07/wesley_knowledge_repo/network/security/John-the-Ripper/" title="John the Ripper"><div class="cover" style="background: var(--default-bg-color)"></div><div class="content is-center"><div class="date"><i class="far fa-calendar-alt fa-fw"></i> 2025-03-07</div><div class="title">John the Ripper</div></div></a></div><div><a href="/2025/03/11/wesley_knowledge_repo/network/security/5.%20%E5%AF%86%E7%A0%81%E6%94%BB%E5%87%BB%20Password%20Attack/" title="5. å¯†ç æ”»å‡» Password Attack"><div class="cover" style="background: var(--default-bg-color)"></div><div class="content is-center"><div class="date"><i class="far fa-calendar-alt fa-fw"></i> 2025-03-11</div><div class="title">5. å¯†ç æ”»å‡» Password Attack</div></div></a></div></div></div></div><div class="aside-content" id="aside-content"><div class="card-widget card-info"><div class="is-center"><div class="avatar-img"><img src="/img/me_new.jpeg" onerror="this.onerror=null;this.src='/img/friend_404.gif'" alt="avatar"/></div><div class="author-info__name">Yuchen You (Wesley)</div><div class="author-info__description"></div></div><div class="card-info-data site-data is-center"><a href="/archives/"><div class="headline">Articles</div><div class="length-num">234</div></a><a href="/tags/"><div class="headline">Tags</div><div class="length-num">33</div></a><a href="/categories/"><div class="headline">Categories</div><div class="length-num">8</div></a></div><a id="card-info-btn" target="_blank" rel="noopener" href="https://github.com/1WesleyYou"><i class="fab fa-github"></i><span>Follow Me</span></a><div class="card-info-social-icons is-center"><a class="social-icon" href="https://github.com/1Wesleyyou" target="_blank" title="Github"><i class="fab fa-github" style="color: #24292e;"></i></a><a class="social-icon" href="mailto:yuchenxr@umich.edu" target="_blank" title="Email"><i class="fas fa-envelope" style="color: #4a7dbe;"></i></a><a class="social-icon" href="https://www.linkedin.com/in/yuchen-you-a74940314/?locale=en_US" target="_blank" title="LinkedIn"><i class="fab fa-linkedin" style="color: #4a4dbe;"></i></a><a class="social-icon" href="/Resume.pdf" target="_blank" title="CV"><i class="fas fa-address-card" style="color: #251456;"></i></a></div></div><div class="card-widget card-announcement"><div class="item-headline"><i class="fas fa-bullhorn fa-shake"></i><span>Announcement</span></div><div class="announcement_content">This is my Blog</div></div><div class="sticky_layout"><div class="card-widget" id="card-toc"><div class="item-headline"><i class="fas fa-stream"></i><span>Contents</span><span class="toc-percentage"></span></div><div class="toc-content"><ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E7%BD%91%E7%BB%9C%E5%B1%82%E5%9F%BA%E7%A1%80"><span class="toc-number">1.</span> <span class="toc-text">ç½‘ç»œå±‚åŸºç¡€</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#ip%E5%8D%8F%E8%AE%AE%E6%A0%B8%E5%BF%83%E8%AE%BE%E8%AE%A1"><span class="toc-number">2.</span> <span class="toc-text">IPåè®®æ ¸å¿ƒè®¾è®¡</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%88%86%E7%89%87%E4%B8%8E%E9%87%8D%E7%BB%84-fragmentation-and-reassembly"><span class="toc-number">3.</span> <span class="toc-text">åˆ†ç‰‡ä¸é‡ç»„ Fragmentation and Reassembly</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#ipv6%E6%94%B9%E8%BF%9B%E4%B8%8E%E8%AE%BE%E8%AE%A1%E5%93%B2%E5%AD%A6"><span class="toc-number">4.</span> <span class="toc-text">IPv6æ”¹è¿›ä¸è®¾è®¡å“²å­¦</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%85%B3%E9%94%AE%E5%AF%B9%E6%AF%94-ipv4-vs-ipv6"><span class="toc-number">5.</span> <span class="toc-text">å…³é”®å¯¹æ¯”: IPv4 vs IPv6</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E8%B7%AF%E7%94%B1%E5%99%A8-data-plane"><span class="toc-number">6.</span> <span class="toc-text">è·¯ç”±å™¨ Data Plane</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#ip%E8%B7%AF%E7%94%B1%E5%99%A8%E5%9F%BA%E7%A1%80"><span class="toc-number">6.1.</span> <span class="toc-text">IPè·¯ç”±å™¨åŸºç¡€</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E8%B7%AF%E7%94%B1%E5%99%A8%E5%86%85%E9%83%A8%E7%BB%93%E6%9E%84"><span class="toc-number">6.2.</span> <span class="toc-text">è·¯ç”±å™¨å†…éƒ¨ç»“æ„</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E7%BA%BF%E5%8D%A1-linecard"><span class="toc-number">6.2.1.</span> <span class="toc-text">çº¿å¡ Linecard</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#input-linecard-tasks"><span class="toc-number">6.2.2.</span> <span class="toc-text">Input Linecard Tasks</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#output-linecard-tasks"><span class="toc-number">6.2.3.</span> <span class="toc-text">Output Linecard Tasks</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#%E5%88%86%E7%B1%BB%E6%96%B9%E6%B3%95-classification"><span class="toc-number">6.2.3.1.</span> <span class="toc-text">åˆ†ç±»æ–¹æ³• Classification</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E8%B0%83%E5%BA%A6%E7%AE%97%E6%B3%95-scheduler"><span class="toc-number">6.2.3.2.</span> <span class="toc-text">è°ƒåº¦ç®—æ³• Scheduler</span></a><ol class="toc-child"><li class="toc-item toc-level-6"><a class="toc-link" href="#round-robin"><span class="toc-number">6.2.3.2.1.</span> <span class="toc-text">Round-Robin</span></a></li></ol></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E4%B8%8D%E5%90%8C%E7%9A%84%E8%BE%93%E5%87%BA%E6%96%B9%E5%BC%8F"><span class="toc-number">6.2.3.3.</span> <span class="toc-text">ä¸åŒçš„è¾“å‡ºæ–¹å¼</span></a></li></ol></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E8%B7%AF%E7%94%B1%E5%99%A8%E8%BE%85%E5%8A%A9%E7%9A%84%E6%8B%A5%E5%A1%9E%E6%8E%A7%E5%88%B6"><span class="toc-number">6.3.</span> <span class="toc-text">è·¯ç”±å™¨è¾…åŠ©çš„æ‹¥å¡æ§åˆ¶</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%85%AC%E5%B9%B3%E6%80%A7%E6%A8%A1%E5%9E%8B-isolation-fairness"><span class="toc-number">6.3.1.</span> <span class="toc-text">å…¬å¹³æ€§æ¨¡å‹ Isolation&#x2F;Fairness</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E8%B0%83%E6%95%B4%E9%80%9F%E7%8E%87-rate-adjustment-rate-control-protocol-rcp"><span class="toc-number">6.3.2.</span> <span class="toc-text">è°ƒæ•´é€Ÿç‡ Rate Adjustment: Rate Control Protocol (RCP)</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%A3%80%E6%B5%8B%E6%8B%A5%E5%A1%9E-congestion-detection"><span class="toc-number">6.3.3.</span> <span class="toc-text">æ£€æµ‹æ‹¥å¡ Congestion Detection</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#routing-%E7%9A%84%E6%A0%B8%E5%BF%83%E7%9B%AE%E6%A0%87-routing-objectives"><span class="toc-number">7.</span> <span class="toc-text">Routing çš„æ ¸å¿ƒç›®æ ‡(Routing Objectives)</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E8%B7%AF%E7%94%B1%E7%8A%B6%E6%80%81%E5%88%86%E6%9E%90-routing-state-analysis"><span class="toc-number">7.1.</span> <span class="toc-text">è·¯ç”±çŠ¶æ€åˆ†æ(Routing State Analysis)</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%9C%80%E5%B0%8F%E6%88%90%E6%9C%AC%E8%B7%AF%E5%BE%84%E8%B7%AF%E7%94%B1-least-cost-path-routing"><span class="toc-number">7.2.</span> <span class="toc-text">æœ€å°æˆæœ¬è·¯å¾„è·¯ç”±(Least-Cost Path Routing)</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#dijkstra%E7%AE%97%E6%B3%95%E5%AE%9E%E8%B7%B5-dijkstra-in-practice"><span class="toc-number">7.3.</span> <span class="toc-text">Dijkstraç®—æ³•å®è·µ(Dijkstra in Practice)</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E9%93%BE%E8%B7%AF%E7%8A%B6%E6%80%81%E8%B7%AF%E7%94%B1-link-state-routing"><span class="toc-number">7.4.</span> <span class="toc-text">é“¾è·¯çŠ¶æ€è·¯ç”± (Link-State Routing)</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E8%B7%9D%E7%A6%BB%E5%90%91%E9%87%8F%E8%B7%AF%E7%94%B1-distance-vector-routing"><span class="toc-number">7.5.</span> <span class="toc-text">è·ç¦»å‘é‡è·¯ç”± (Distance-Vector Routing)</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E8%B7%AF%E7%94%B1%E5%8D%8F%E8%AE%AE%E5%AF%B9%E6%AF%94"><span class="toc-number">7.6.</span> <span class="toc-text">è·¯ç”±åè®®å¯¹æ¯”</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E8%87%AA%E6%B2%BB%E7%B3%BB%E7%BB%9F-autonomous-system-as"><span class="toc-number">8.</span> <span class="toc-text">è‡ªæ²»ç³»ç»Ÿ(Autonomous System, AS)</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%9F%BA%E6%9C%AC%E6%A6%82%E5%BF%B5"><span class="toc-number">8.1.</span> <span class="toc-text">åŸºæœ¬æ¦‚å¿µ</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%9F%9F%E5%86%85%E4%B8%8E%E5%9F%9F%E9%97%B4%E8%B7%AF%E7%94%B1%E5%AF%B9%E6%AF%94"><span class="toc-number">8.2.</span> <span class="toc-text">åŸŸå†…ä¸åŸŸé—´è·¯ç”±å¯¹æ¯”</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%9F%9F%E9%97%B4%E8%B7%AF%E7%94%B1%E7%9A%84%E6%8C%91%E6%88%98"><span class="toc-number">8.3.</span> <span class="toc-text">åŸŸé—´è·¯ç”±çš„æŒ‘æˆ˜</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#1-%E6%89%A9%E5%B1%95%E6%80%A7-scaling"><span class="toc-number">8.4.</span> <span class="toc-text">1. æ‰©å±•æ€§(Scaling)</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-%E7%AE%A1%E7%90%86%E8%87%AA%E6%B2%BB%E4%B8%8E%E9%9A%90%E7%A7%81"><span class="toc-number">8.5.</span> <span class="toc-text">2. ç®¡ç†è‡ªæ²»ä¸éšç§</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#ip%E5%9C%B0%E5%9D%80%E5%88%86%E9%85%8D%E4%B8%8Ecidr"><span class="toc-number">9.</span> <span class="toc-text">IPåœ°å€åˆ†é…ä¸CIDR</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#1-ipv4%E5%9C%B0%E5%9D%80%E7%BB%93%E6%9E%84"><span class="toc-number">9.1.</span> <span class="toc-text">1. IPv4åœ°å€ç»“æ„</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-%E5%9C%B0%E5%9D%80%E5%88%86%E9%85%8D%E5%B1%82%E6%AC%A1-hierarchical"><span class="toc-number">9.2.</span> <span class="toc-text">2. åœ°å€åˆ†é…å±‚æ¬¡ Hierarchical</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E8%BE%B9%E7%95%8C%E7%BD%91%E5%85%B3%E5%8D%8F%E8%AE%AE-bgp-border-gateway-protocol"><span class="toc-number">10.</span> <span class="toc-text">è¾¹ç•Œç½‘å…³åè®®(BGP, Border Gateway Protocol)</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#1-%E6%A0%B8%E5%BF%83%E7%89%B9%E6%80%A7"><span class="toc-number">10.1.</span> <span class="toc-text">1. æ ¸å¿ƒç‰¹æ€§</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-as%E9%97%B4%E5%95%86%E4%B8%9A%E5%85%B3%E7%B3%BB"><span class="toc-number">10.2.</span> <span class="toc-text">2. ASé—´å•†ä¸šå…³ç³»</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-%E8%B7%AF%E7%94%B1%E9%80%89%E6%8B%A9%E5%8E%9F%E5%88%99"><span class="toc-number">10.3.</span> <span class="toc-text">3. è·¯ç”±é€‰æ‹©åŸåˆ™</span></a></li></ol></li></ol></div></div><div class="card-widget card-recent-post"><div class="item-headline"><i class="fas fa-history"></i><span>Recent Post</span></div><div class="aside-list"><div class="aside-list-item no-cover"><div class="content"><a class="title" href="/2025/03/20/wesley_knowledge_repo/network/security/7.%20%E8%AE%BF%E9%97%AE%E6%9D%83%E9%99%90%E6%8E%A7%E5%88%B6%E6%94%BB%E5%87%BB%20Access%20Control/" title="7. è®¿é—®æƒé™æ§åˆ¶æ”»å‡» Access Control">7. è®¿é—®æƒé™æ§åˆ¶æ”»å‡» Access Control</a><time datetime="2025-03-20T04:58:08.000Z" title="Created 2025-03-20 12:58:08">2025-03-20</time></div></div><div class="aside-list-item no-cover"><div class="content"><a class="title" href="/2025/03/12/wesley_knowledge_repo/network/security/6.%20binary%20%E4%BA%8C%E8%BF%9B%E5%88%B6%E6%94%BB%E5%87%BB/" title="6. binary äºŒè¿›åˆ¶æ”»å‡»">6. binary äºŒè¿›åˆ¶æ”»å‡»</a><time datetime="2025-03-12T04:58:08.000Z" title="Created 2025-03-12 12:58:08">2025-03-12</time></div></div><div class="aside-list-item no-cover"><div class="content"><a class="title" href="/2025/03/11/wesley_knowledge_repo/os/5.%20%E5%86%85%E5%AD%98%E7%A9%BA%E9%97%B4%E6%8A%BD%E8%B1%A1%20Address%20Space/" title="5. å†…å­˜ç©ºé—´æŠ½è±¡ Address Space">5. å†…å­˜ç©ºé—´æŠ½è±¡ Address Space</a><time datetime="2025-03-11T06:56:38.000Z" title="Created 2025-03-11 14:56:38">2025-03-11</time></div></div><div class="aside-list-item no-cover"><div class="content"><a class="title" href="/2025/03/11/wesley_knowledge_repo/network/security/5.%20%E5%AF%86%E7%A0%81%E6%94%BB%E5%87%BB%20Password%20Attack/" title="5. å¯†ç æ”»å‡» Password Attack">5. å¯†ç æ”»å‡» Password Attack</a><time datetime="2025-03-11T06:01:08.000Z" title="Created 2025-03-11 14:01:08">2025-03-11</time></div></div><div class="aside-list-item no-cover"><div class="content"><a class="title" href="/2025/03/11/wesley_knowledge_repo/network/3.%20%E7%BD%91%E7%BB%9C%E5%B1%82/" title="3. ç½‘ç»œå±‚">3. ç½‘ç»œå±‚</a><time datetime="2025-03-11T04:08:08.000Z" title="Created 2025-03-11 12:08:08">2025-03-11</time></div></div></div></div></div></div></main><footer id="footer"><div id="footer-wrap"><div class="copyright">&copy;2020 - 2025 By Yuchen You (Wesley)</div><div class="framework-info"><span>Framework </span><a target="_blank" rel="noopener" href="https://hexo.io">Hexo</a><span class="footer-separator">|</span><span>Theme </span><a target="_blank" rel="noopener" href="https://github.com/jerryc127/hexo-theme-butterfly">Butterfly</a></div><div class="footer_custom_text">welcome to my blog!</div></div></footer></div><div id="rightside"><div id="rightside-config-hide"><button id="readmode" type="button" title="Read Mode"><i class="fas fa-book-open"></i></button><button id="darkmode" type="button" title="Toggle Between Light And Dark Mode"><i class="fas fa-adjust"></i></button><button id="hide-aside-btn" type="button" title="Toggle between Single-column and Double-column"><i class="fas fa-arrows-alt-h"></i></button></div><div id="rightside-config-show"><button id="rightside-config" type="button" title="Setting"><i class="fas fa-cog fa-spin"></i></button><button class="close" id="mobile-toc-button" type="button" title="Table Of Contents"><i class="fas fa-list-ul"></i></button><button id="go-up" type="button" title="Back To Top"><span class="scroll-percent"></span><i class="fas fa-arrow-up"></i></button></div></div><div><script src="/js/utils.js?v=4.13.0"></script><script src="/js/main.js?v=4.13.0"></script><script src="https://cdn.jsdelivr.net/npm/@fancyapps/ui@5.0.33/dist/fancybox/fancybox.umd.min.js"></script><div class="js-pjax"></div><canvas class="fireworks" mobile="false"></canvas><script src="https://cdn.jsdelivr.net/npm/butterfly-extsrc@1.1.3/dist/fireworks.min.js"></script><script defer="defer" id="fluttering_ribbon" mobile="false" src="https://cdn.jsdelivr.net/npm/butterfly-extsrc@1.1.3/dist/canvas-fluttering-ribbon.min.js"></script><script async data-pjax src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script><div id="local-search"><div class="search-dialog"><nav class="search-nav"><span class="search-dialog-title">Search</span><span id="loading-status"></span><button class="search-close-button"><i class="fas fa-times"></i></button></nav><div class="is-center" id="loading-database"><i class="fas fa-spinner fa-pulse"></i><span>  Loading the Database</span></div><div class="search-wrap"><div id="local-search-input"><div class="local-search-box"><input class="local-search-box--input" placeholder="Search for Posts" type="text"/></div></div><hr/><div id="local-search-results"></div><div id="local-search-stats-wrap"></div></div></div><div id="search-mask"></div><script src="/js/search/local-search.js?v=4.13.0"></script></div></div></body></html>